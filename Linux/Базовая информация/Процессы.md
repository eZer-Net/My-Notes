
#### daemon programs 
программы действующие в фоновом режиме и выполняют свою работу без участия пользователя.

#### Процесс
это запущенный экземпляр команды, идентифицируется в системе с помощью так называемого идентификатора процесса (PID уникален для текущей системы).

ps - просмотр списка процессов
	Параметры
		-e или -A - показать все процессы.
		-f - полная информация о процессах (full-format listing).
		-l - длинный формат (long format).
		-u user - показать процессы, принадлежащие указанному пользователю.
		-p pid - показать процесс с указанным идентификатором (PID).
		-t tty - показать процессы, связанные с указанным терминалом.
		Формат вывода:
			-o format - указать свой собственный формат вывода. Например, -o pid,user,%cpu,%mem,cmd.
			--sort key - сортировать вывод по указанному ключу (например, --sort=-%mem для сортировки по использованию памяти).
		Дополнительные опции:
			aux - часто используемый вариант, который показывает все процессы с дополнительной информацией.
			-H - показать иерархию процессов (древовидный вывод).
			--forest - визуализировать иерархию процессов в виде дерева.
		Фильтрация:
			--user user: фильтровать по пользователю.
			--pid pid: фильтровать по PID.
			
            x - параметр для просмотра всех процессов
                Состояние процессов
                R - процесс выполняется (running)
                S - процесс спит (sleeping), ожидая события (например, ввода/
                вывода)
                D - процесс находится в неотклоняемом состоянии сна 
                (uninterruptible sleep), обычно ожидая ввода/вывода
                T - процесс остановлен (stopped), может быть остановлен 
                пользователем или сигналом
                Z - процесс зомби (zombie), завершен, но еще не очищен 
                родительским процессом
                < - процесс имеет высокий приоритет (high-priority)
                N - процесс имеет низкий приоритет (low-priority)
            aux - выводит процессоры принадлежащие всем пользователям
                Заголовки столбцов
                USER - идентификатор пользователя. Владелец процесса
                %CPU - Использование процессора в процентах
                %MEM - Исп. памяти в процентах
                VSZ - Объём виртуальной памяти
                RSS - Объём оперативной памяти ОЗУ, используемой процессом, кб
                START - Время запуска процессора. Для значений свыше 24ч 
                вводиться дата

top - просмотр работы процессоров в динамике 
	Поля в разделе со сводной информацией Имя программы, Текущее время, Uptime (продолжительность работы), В системе работаю кол. юзеров, Средняя нагрузка,
            Tasks: - суммарное число процессов в разных состояниях
                n%us - процент времени, в течение которого процессор занят пользовательскими процессами.
                n%sy - процент времени, в течение которого процессор занят системными (ядро) процессами
                n%ni - процент времени, в течение которого процессор занят пользовательскими процессами с изменённым приоритетом (nice).
                n%id - процент времени, в течение которого процессор был свободен (idle).
            Mem: - информация о использовании оперативной памяти ОЗУ
            Swap: - информация о использовании своп-файла (виртуальная память)

ctrl+c - прерывает выполнение команды

ctrl+z - отправляет программу в фоновый режим (программа & - отправит программу при запуске сразу в фоновый режим и выведет её PID идентификатор а так же номер в начале "[]")

bg %(номер программы из []) - перевести в фоновый режим
fg %(номер программы из []) - вернуть процесс на передний план (если программа в фоновом режиме то и комбинации по закрытию или работы с ней не будут работать, надо сначала вернуть её из фонового режима)

jobs - выведет в консоль те запущенные программы которые запускались через консоль

kill -сигнал номер программы PID - принудительно закрыть программу
    Сигналы
        -1  (HUP) - сигнал, уведомляющий о том, что терминал был закрыт. Обычно используется для перезагрузки демонов.
        -2  (INT) - сигнал прерывания, обычно отправляется при нажатии Ctrl+C в терминале, чтобы остановить процесс.
        -9  (KILL) - принудительное завершение процесса. Этот сигнал нельзя игнорировать, и процесс будет немедленно завершён.
        -15 (TERM) - по умолчанию сигнал для завершения процесса. Процесс может обработать этот сигнал и выполнить очистку перед завершением.
        -18 (CONT) - сигнал продолжения приостановленного процесса. Используется для возобновления выполнения процесса, который был остановлен.
        -19 (STOP) - сигнал остановки процесса. Этот сигнал также нельзя игнорировать и приводит к немедленному приостановлению процесса.
        -20 (TSTP) - сигнал приостановки процесса, отправляемый при нажатии Ctrl+Z в терминале. Процесс может быть возобновлён позже.

killall [-u пользователь] [-сигнал] имя программы - принудительно закроет все процессы программы
        -u - для завершения процессов определённого пользователя
        killall xlogo - пример закрытия xlogo как владелец этого процесса

Stop - приостанавливает процесс, пока не будет выбрано действие

Continue Process - это то же самое, что нажать сочетание клавиш Ctrl+Z на процессе из оболочки, фоновый режим.
    Continue - продолжает остановленный процесс.

End - посылает процессу сигнал завершения (15). В большинстве случаев это действие полностью завершает процесс.

Change Priority - список приоритетов от очень низкого до очень высокого. 
	Выберите пункт Custom, чтобы отобразить ползунковый регулятор приоритета. Обычный приоритет равен 0. Высокий приоритет обозначается отрицательными цифрами от –1 до –20. Низкий приоритет обозначается цифрами от 0 до 19. Только суперпользователь может назначать отрицательные приоритеты, поэтому, чтобы установить высокий приоритет, при появлении запроса необходимо указать пароль.

Memory Maps - позволяет просмотреть карту системной памяти, чтобы увидеть, какие компоненты хранятся в памяти для данного процесса.

Open Files - позволяет просмотреть, какие файлы в данный момент открыты из-за процесса.

Properties - позволяет просматривать другие параметры, связанные с процессом (например, контекст безопасности, использование памяти и процент использования процессора).

Остановка системы
    halt - используется для немедленной остановки всех процессов и завершения работы системы
    poweroff - завершает работу системы и отключает питание. Это более безопасный способ выключения, чем просто отключение питания
    reboot - перезагружает систему. 
	    Она завершает работу всех процессов и перезапускает операционную систему
    shutdown - используется для безопасного завершения работы системы. 
	    Она позволяет указать время, через которое система будет остановлена, а также отправить уведомления пользователям.
            sudo shutdown now - для немедленного выключения
            sudo shutdown +10 - для выключения через 10 минут
            sudo shutdown -r now - для перезагрузки
            
            sudo shutdown -r +10  - "Система будет перезагружена через 10 минут. 
            Пожалуйста, сохраните свою работу." отправит сообщение всем 
            пользователям и через 10 минут система перезагрузиться

Изменение приоритетов процессов
        Команды nice и renice применяются для настройки или изменения приоритета.
        Каждый запущенный в системе процесс имеет приоритет в диапазоне от –20 до 19.
        По умолчанию устанавливается приоритет 0.
            Чем ниже значение приоритета, тем процесс приоритетнее для процессора.
            Чем выше значение приоритета, тем меньше процессор «обращает внимания»
            на процесс. Таким образом, процесс со значением –20 приоритетнее для процессора, чем процесс со значением 19.

            Обычный пользователь может установить приоритет только от 0 до 19. 
            Отрицательные значения ему недоступны. Таким образом, обычный 
            пользователь не может устанавливать приоритет процессов выше, чем 
            задано по умолчанию.
            Обычный пользователь может только увеличивать значения, но не 
            уменьшать. Так, например, если пользователь установит значение 
            приоритета 10, а затем захочет вернуться к значению 5, действие 
            выполнено не будет. Любая попытка установить отрицательное значение 
            также окажется неудачной. Обычный пользователь может устанавливать 
            приоритет только для собственных процессов. Суперпользователю 
            разрешено устанавливать приоритеты для любого процесса,и это может 
            быть любое допустимо

Используйте команду nice, чтобы установить приоритет процесса.
Для изменения приоритета уже запущенного процесса задействуйте команду renice вместе  с идентификатором процесса, как показано далее:
    nice -n +5 updatedb &

Значение приоритета можно уменьшить с помощью команды renice (Помните, что обычный пользователь не может уменьшить значение приоритета и установить отрицательное число). Так, можно изменить приоритет команды updatedb, задав значение -5:
	renice -n -5 20284

Однако значение приоритета процесса не применяется к его дочерним процессам или любым другим связанным процессам. Другими словами, приоритет не ограничивает общее количество ресурсов, которые конкретный пользователь или приложение может потреблять из системы Linux.


cgroups - это механизм, который позволяет ограничивать, контролировать и изолировать ресурсы (такие как процессор, память, диск и сеть) для групп процессов.
    Создание cgroup:
        mkdir /sys/fs/cgroup/subsystem/cgroup_name
	        subsystem: тип ресурсов, которые вы хотите контролировать (например, cpu, memory).
	        cgroup_name: имя вашей группы.
    Добавление процесса в cgroup:
        echo pid > /sys/fs/cgroup/subsystem/cgroup_name/cgroup.procs
            pid идентификатор процесса, который вы хотите добавить в cgroup.
    Настройка параметров cgroup:
        Например, для ограничения использования памяти:
            echo memory_limit>/sys/fs/cgroup/memory/cgroup_name/memory.limit_in_bytes
	            memory_limit: максимальный объем памяти, который может использовать группа процессов.



 Основные параметры cgroups Типы ресурсов, которые могут быть ограничены механизмом cgroups, таковы.
	1. Устройства (blkio ) — устанавливает лимиты на доступ к запоминающим устройствам (жестким дискам, USB-накопителям и т. д.).
	2. Процессор ( cpu ) — обеспечивает доступ процессов в рамках контрольной группы к CPU.
	3. Учет процессов (cpuacct) — генерирует отчеты об использовании ресурсов процессора. С помощью данной информации можно рассчитать, сколько клиенты должны будут заплатить за объем задействуемой ими вычислительной мощности.
	4. Распределение процессоров (cpuset) — при наличии нескольких процессорных ядер распределяет между ними задачи в рамках контрольной группы.
	5. Доступ к устройствам (devices) — разрешает или блокирует доступ (mknod) к выбранным устройствам.
	6. Приостановка процесса (freezer) — приостанавливает и возобновляет выполнение задач в рамках контрольной группы.
	7. Использование памяти (memory) — управляет выделением памяти для групп процессов и создает отчеты об используемых ресурсах.
	8. Пропускная способность сети (net_cls ) — ограничивает доступ к сети для выбранных задач в рамках контрольной группы. Помечает сетевые пакеты специальной меткой, позволяя идентифицировать порождаемые определенной задачей в рамках контрольной группы.
	9. Сетевой трафик (net_prio) — используется для динамической установки приоритетов по трафику, позволяет администратору изменять приоритеты.
	10. Пространство имен (ns) — разделяет контрольные группы на пространства имен, причем для одной контрольной группы видны только связанные пространства имен. Пространства имен могут включать отдельные таблицы процессов, таблицы монтирования и сетевые интерфейсы.


 cpu: управляет использованием процессора. 
	 cpu.shares: относительная доля времени процессора для группы.
    cpu.cfs_quota_us: максимальное время, которое группа может использовать процессор за определенный период.
    
memory: управляет использованием памяти.
	memory.limit_in_bytes: максимальный объем памяти для группы.
	memory.soft_limit_in_bytes: "мягкий" предел, который не может быть превышен, но система может его игнорировать при наличии свободной памяти.
	
blkio: управляет вводом-выводом на диске.
	blkio.throttle.read_bps_device: ограничение скорости чтения с устройства.
	blkio.throttle.write_bps_device: ограничение скорости записи на устройство.
	
Пример использования
	Если вы хотите создать cgroup для ограничения использования памяти до 512 МБ для процесса с PID 1234, вы можете сделать следующее:
	mkdir /sys/fs/cgroup/memory/my_cgroup
	echo 536870912 > /sys/fs/cgroup/memory/my_cgroup/memory.limit_in_bytes
	echo 1234 > /sys/fs/cgroup/memory/my_cgroup/cgroup.procs