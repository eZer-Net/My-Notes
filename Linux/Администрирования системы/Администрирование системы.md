
Bash zsh - [[Настройка оболочки]]
Пути системы и что они хранят в себе - [[Файловая система]]
Виды серверов - [[Виды серверов]]


Роль системного администратора отделена от роли других пользователей, и это придает работе определенные особенности. В системе со множеством пользователей
ограничения в сфере управления позволяют сохранять ее безопасность. 
Наличие администратора также не позволяет другим пользователям нанести вред
системе, что может произойти, даже если они просто пишут текст в документе или
просматривают страницы в Интернете.

**Администрирование серверов с помощью инструмента [[Администрирование системы#Администрирование с помощью Cockpit|Cockpit]].**
	RHEL, Fedora и другие дистрибутивы Linux взяли на себя обязательство
	применять Cockpit в качестве основного браузерного средства администрирования системы. Инструмент позволяет отслеживать и изменять настройки в основных действиях системы, в хранилище, сети, учетных записях, службах и других функциях.

**Инструменты с графическим интерфейсом.**
	До того как интерфейс Cockpit стал популярным, RHEL, Fedora и другие дистрибутивы Linux задействовали индивидуальные инструменты администрирования с графическим интерфейсом, которые запускались командами, начинающимися с system-config-*. Большинство этих инструментов администрирования в последних версиях RHEL и Fedora не используются.


## Список общих функций, которыми должен управлять системный администратор.

#### Файловые системы.
При первой установке Linux структура каталогов настраивается таким образом,
чтобы система стала пригодной для использования. Однако, если позже пользователи захотят добавить дополнительное хранилище или изменить расположение файловой системы за пределами своего домашнего каталога, для этого им понадобятся административные права. Кроме того, суперпользователь имеет разрешение на доступ к файлам, которые принадлежат пользователям.
Суперпользователь может копировать, перемещать или изменять файлы любого другого пользователя — привилегия, необходимая для создания резервных копий файловой системы.

#### Установка программного обеспечения.
Поскольку вредоносное программное обеспечение может нанести ущерб системе или сделать ее небезопасной, для установки программ необходимы права суперпользователя. К тому же важно сделать так, чтобы программное обеспечение было доступно всем пользователям системы. Обычные пользователи могут устанавливать лишь некоторые программы в собственных каталогах и выводить информацию об установленных программах.

#### Учетные записи пользователя.
Только суперпользователь может добавлять и удалять учетные записи пользователей или групп.

#### Сетевой интерфейс.
Раньше суперпользователь должен был настраивать сетевые интерфейсы, запускать и останавливать их. Сейчас многие настольные компьютеры Linux позволяют обычным пользователям запускать и останавливать сетевые интерфейсы со своего рабочего стола с помощью программы Network Manager. Особенно подходит она для беспроводных сетевых интерфейсов, которые меняются в зависимости от местоположения ноутбука или устройства с Linux.

#### Серверы.
Настройка, запуск и остановка веб-серверов, файловых серверов, серверов доменных имен, почтовых серверов и десятков других серверов требует привилегий суперпользователя. Содержимое, например веб-страницы, могут добавить на серверы обычные пользователи, если настройки системы позволяют. Службы часто запускаются под специальные административные учетные записи пользователей, такие как apache (для службы httpd) и rpc (для службы rpcbind). Таким образом, если кто-то взломает службу, он не сможет получить привилегии администратора для других служб или системных ресурсов.

#### Безопасность.
Настройка функций безопасности, таких как брандмауэры и списки доступа для пользователей, обычно выполняется при наличии прав суперпользователя. Кроме того, суперпользователь должен следить за использованием служб и за тем, чтобы ресурсы сервера не исчерпывались и ими не злоупотребляли.

## Администрирование с помощью Cockpit

**Cockpit** — это браузерный инструмент системного администрирования Linux.
Он сочетает в себе целый ряд административных действий и подключается
к разнообразному набору функций API Linux с помощью пакета cockpit-bridge.

 Начало работы с Cockpit включает несколько шагов: 
	 скачивание, установка, подключение и вход в интерфейс.

#### 1. Скачивание и установка Cockpit
Cockpit обычно доступен в стандартных репозиториях большинства дистрибутивов Linux. Чтобы установить Cockpit, выполните следующие команды в терминале:

Для Fedora, CentOS или RHEL:
	sudo dnf install cockpit

Для Ubuntu или Debian:
	sudo apt install cockpit

#### 2. Включение сокета 
(Сокет — это конечная точка для обмена данными между двумя программами (или процессами) по сети) Cockpit После установки необходимо включить сокет Cockpit,
чтобы он мог принимать подключения. Для этого выполните команду:

sudo systemctl enable --now cockpit.socket
	Эта команда активирует сокет Cockpit и запускает его сразу же.
	
#### 3. Подключение к Cockpit через браузер
После того как сокет запущен, вы можете подключиться к Cockpit через веб-браузер.
Откройте браузер и введите следующий адрес:

http://<IP-адрес вашего сервера>:9090
	Замените <IP-адрес вашего сервера> на фактический IP-адрес вашего сервера или localhost,
	если вы работаете на локальной машине.
	
#### 4. Вход в Cockpit
На странице входа в Cockpit вам будет предложено ввести учетные данные. Используйте имя пользователя и пароль учетной записи, которая имеет права доступа на сервере (обычно это учетная запись администратора).

После успешного входа вы получите доступ к интерфейсу Cockpit, где сможете управлять системой,
	просматривать состояние сервисов, настраивать сети и выполнять другие задачи администрирования.

#### Заключение
Cockpit — это мощный инструмент для управления серверами через веб-интерфейс.
Он предоставляет удобный способ мониторинга и администрирования систем без необходимости использования командной строки.

## Популярные графические браузерные инструменты администрирования

#### Webmin
Описание: Универсальный инструмент для администрирования серверов через веб-интерфейс.
	Поддерживаемые дистрибутивы: Debian, Ubuntu (deb), CentOS, Fedora, RHEL (rpm), Arch Linux (через AUR).

#### Ajenti
Описание: Легкий и современный интерфейс для управления сервером.
	Поддерживаемые дистрибутивы: Debian, Ubuntu (deb), CentOS, RHEL (rpm), Arch Linux (через AUR).

#### Cockpit
Описание: Инструмент для управления серверами с акцентом на простоту использования и интеграцию с системами контейнеризации.
	Поддерживаемые дистрибутивы: Fedora, CentOS, RHEL (rpm), Ubuntu (deb), Arch Linux (через AUR).

#### ISPConfig
Описание: Панель управления хостингом с поддержкой нескольких серверов.
	Поддерживаемые дистрибутивы: Debian, Ubuntu (deb), CentOS, RHEL (rpm).

#### Plesk
Описание: Коммерческая панель управления хостингом с широкими возможностями.
	Поддерживаемые дистрибутивы: CentOS, RHEL (rpm), Ubuntu (deb).

#### cPanel/WHM
Описание: Популярная коммерческая панель управления для веб-хостинга.
	Поддерживаемые дистрибутивы: CentOS, CloudLinux (rpm).

#### Zentyal
Описание: Серверная платформа на базе Ubuntu для управления сетями и службами.
	Поддерживаемые дистрибутивы: Ubuntu (deb).

#### OpenMediaVault
Описание: Решение для создания NAS-сервера с веб-интерфейсом.
	Поддерживаемые дистрибутивы: Debian (deb).

#### Nextcloud
Описание: Платформа для управления файлами и совместной работы с возможностью администрирования через веб-интерфейс.
	Поддерживаемые дистрибутивы: Работает на любом дистрибутиве с поддержкой PHP и веб-сервера.



## Административный доступ с помощью команды sudo

Определенные пользователи могут получить административные права для определенных задач, набрав команду sudo, а затем команду, которую нужно запустить, и все это без ввода пароля суперпользователя. 
**Файл sudoers — самый популярный способ предоставления прав любым пользователю или группе. С его помощью можно:**

 назначить права доступа администратора любой группе командой sudo;

назначить права доступа администратора для набора команд;

дать пользователям права доступа, но без передачи пароля — им нужно ввести
собственный пароль;

разрешить пользователям запускать sudo вообще без ввода пароля (по желанию);

отследить, какие пользователи выполняли административные команды в вашей
системе. (Команда su сообщает, что кто-то зашел с паролем суперпользователя в систему, а как команда sudo регистрирует, какой пользователь запускает
административную команду.)


Функция sudoers предоставляет полные или ограниченные права доступа любому пользователю, добавляя его в файл /etc/sudoers. Администратор определяет, какие права может иметь данный пользователь. Затем последний может выполнить любую команду, на которую он имеет права, введя перед ней команду sudo.

### ПРЕДУПРЕЖДЕНИЕ!
Никогда не редактируйте этот файл в обычном текстовом редакторе!
Всегда используйте для этой цели только команду visudo!

Неправильный синтаксис файла /etc/sudoers может нарушить работу системы и сделать невозможным получение повышенного уровня привилегий, и поэтому очень важно использовать для его редактирования команду visudo.

### Пример из файла:
    # Allow members of group sudo to execute any command
      %sudo   ALL=(ALL:ALL) ALL

Строки пользовательских привилегий:
	root ALL=(ALL:ALL) ALL
	Первое поле показывает имя пользователя, которое правило будет применять к (root).
		Первое “ALL” означает, что данное правило применяется ко всем хостам.
			Данное “ALL” означает, что пользователь root может запускать команды от лица всех пользователей.
				“ALL” означает, что пользователь root может запускать команды от лица всех групп.
					Последнее “ALL” означает, что данные правила применяются всем командам.



## Файлы конфигурации

Файлы конфигурации — это еще одна основа администрирования Linux. **Почти**
**все настройки конкретного компьютера — учетные записи пользователей, сетевые адреса или предпочтения графического интерфейса — сохраняются в текстовых файлах.** Это и преимущество, и недостаток. Преимущество обычных текстовых файлов заключается в том, что их легче читать и редактировать. Подойдет любой текстовый редактор. Недостатком же является то, что при редактировании файлов конфигурации проверка ошибок обычно не выполняется. Иногда нужно запустить программу, которая прочитает эти файлы (например, сетевой демон или рабочий стол X), чтобы узнать, правильно ли они настроены.

#### Два основных места расположения
    файлов конфигурации — это домашний каталог, где хранятся личные файлы
    конфигурации, и каталог /etc, в котором хранятся общесистемные
    файлы коyфигурации.

#### /etc/cron*
Содержат файлы, определяющие, как команда crond запускает приложения ежедневно (cron.daily ), ежечасно (cron.hourly), ежемесячно (cron.monthly) или еженедельно (cron.weekly).

#### /etc/default
Содержит файлы, устанавливающие значения по умолчанию для различных утилит. Например, файл для команды useradd определяет номер группы по умолчанию, домашний каталог, срок действия пароля, оболочку и каталог шаблонов (/etc/skel), используемый при создании новой учетной записи пользователя.

#### /etc/httpd
Содержит множество файлов для настройки поведения веб-сервера Apache (в частности, демона httpd). (В Ubuntu и других системах Linux вместо него применяется файл /etc/apache или /etc/apache2.)

#### /etc/mail
Содержит файлы для настройки почтового агента sendmail.

#### /etc/security
Содержит файлы, которые устанавливают различные условия безопасности по умолчанию для компьютера, в основном определяя, как выполняется аутентификация. Эти файлы — часть пакета подключаемых модулей аутентификации pam (pluggable authentication modules).

#### /etc/skel
Все файлы, содержащиеся в этом каталоге, автоматически копируются в домашний каталог пользователя при добавлении этого пользователя в систему. По умолчанию большинство этих файлов точечные (.), например kde (каталог для настройки параметров рабочего стола KDE по умолчанию) и bashrc (каталог для установки значений по умолчанию, применяемых с оболочкой bash).

#### etc/aliases
Может содержать списки рассылки для почтовых служб Linux. (В Ubuntu этот файл находится в файле /etc/mail после установки пакета sendmail.)

#### etc/bashrc
Устанавливает общесистемные значения по умолчанию для пользователей оболочки bash. (В некоторых дистрибутивах Linux может называться bash.bashrc.)

#### etc/crontab
Задает время выполнения автоматических задач и переменных, связанных с функцией cron (например, SHELL или PATH).

#### etc/exports
Содержит список локальных каталогов, доступных для совместного применения удаленными компьютерами с помощью сетевой файловой системы (NFS).

#### etc/fstab
Определяет устройства для носителей информации (жесткий диск, DVD, CD-ROM и т. д.) и места их установки в системе Linux. Используется	командой mount для выбора того, какие файловые системы монтировать при первой загрузке системы.

#### etc/group
Назначает имена групп и их идентификаторы (gid ), определенные в системе. Групповые права в Linux определяются вторым из трех наборов битов чтения, записи и выполнения rwx (read, write, execute), связанных с каждым файлом и каталогом.

#### etc/gshadow
Содержит теневые пароли для групп.

#### etc/mtab
Содержит список файловых систем, которые в данный момент монтируются

#### etc/passwd
Хранит информацию об учетных записях всех пользователей в локальной системе. Хранит также другую информацию наподобие имен домашнего каталога и оболочки по умолчанию. (Редко хранит сами пароли пользователей, они обычно находятся в файле /etc/shadow.)

#### etc/printcap
Содержит информацию о принтерах, подключенных к компьютеру. (Если файл printcap не существует, информацию о принтере можно найти в каталоге /etc/cups.)

#### etc/profile
Устанавливает общесистемную среду и программы запуска для все пользователей. Этот файл считывается при входе пользователя в систему.

#### etc/protocols
Устанавливает номера протоколов и имена для различных интернетслужб.

#### etc/shadow
Содержит зашифрованные пароли для пользователей из файла passwd . (Рассматривается как более безопасный способ хранения паролей, чем исходный зашифрованный пароль в файле passwd . Файл passwd должен быть общедоступным, а вот файл shadow может быть доступным только для супер-пользователя.)

#### etc/shells
Перечисляет интерпретаторы командной строки оболочки (bash , sh, csh и т. д.), доступные в системе, а также их расположение.

#### etc/sudoers
Задает команды, на выполнение которых у пользователя нет прав,	но которые могут им выполняться. В частности, этот файл применяется для предоставления конкретным пользователям прав суперпользователя.

#### etc/rsyslog.conf
Определяет, какие сообщения журнала собирает демон rsyslogd	и в каких файлах они хранятся. (Обычно сообщения журнала хранятся в файлах, находящихся в каталоге /var/log.)


## Журналы логи системы

В Linux журналы (логи) играют важную роль в мониторинге и диагностике работы системы. Они помогают отслеживать действия пользователей, системные события, ошибки и другие важные операции.

#### 1. Демон rsyslogd 
Это программа, которая отвечает за сбор и хранение логов (журналов) системы.
Она используется в системах Linux, которые не используют систему инициализации systemd.	 Rsyslogd позволяет записывать сообщения об ошибках и другую отладочную информацию в файлы на диске. Старые версии: В более старых версиях Linux использовались другие демоны для этой же цели, такие как syslogd.

#### 2. Система systemd
Это современная система инициализации, которая управляет запуском служб и процессами в Linux. Она имеет свой собственный способ сбора и отображения логов, который называется журналом systemd. Для работы с этим журналом используется команда journalctl.

##### Команда journalctl для просмотра журнала systemd
###### 1. Просмотр всех записей журнала:
journalctl
###### 2. Просмотр последних N записей:
journalctl -n N
	Например, journalctl -n 100 покажет последние 100 записей.
###### 3. Просмотр журнала в реальном времени:
journalctl -f
###### 4. Фильтрация по времени:
За сегодня:
	journalctl --since today
За конкретный день:
	journalctl --since "YYYY-MM-DD" --until "YYYY-MM-DD"
		Например, journalctl --since "2023-10-01" --until "2023-10-02".
###### 5. Фильтрация по системным единицам (сервисам):
journalctl -u имя_сервиса.service
		Например, journalctl -u ssh.service.
###### 6. Фильтрация по приоритету (уровню важности):
journalctl -p уровень
	Уровни от 0 до 7:
		0 — emerg (экстренные)
		1 — alert (тревога)
		2 — crit (критические)
		3 — err (ошибки)
		4 — warning (предупреждения)
		5 — notice (замечания)
		6 — info (информация)
		7 — debug (отладка)

###### 7. Поиск по ключевым словам:
journalctl | grep "ключевое_слово"

###### 8. Вывод в формате JSON:
journalctl -o json

###### 9. Очистка журнала (требуются права суперпользователя):
journalctl --vacuum-time=7d
		Эта команда удалит записи старше 7 дней.

##### Типы журналов
Журналы systemd могут содержать различные типы записей, включая: Журналы системных служб: Записи, связанные с работой системных служб и демонов. Журналы ядра: Сообщения от ядра Linux (например, аппаратные ошибки). Журналы пользователей: Записи о действиях пользователей и приложений. Ошибки и предупреждения: Сообщения об ошибках и предупреждениях из различных компонентов системы.

##### Путь /var/log так же хранит логи, таких как Ubuntu, CentOS, Debian и Fedora: Общие журналы

###### 1. /var/log/syslog или /var/log/messages
Содержит общие системные сообщения. В Ubuntu и Debian используется syslog, в CentOS и RHEL — messages.

###### 2. /var/log/auth.log или /var/log/secure
Содержит записи о событиях аутентификации, таких как входы в систему, использование sudo, SSH и другие действия, связанные с безопасностью.

###### 3. /var/log/kern.log или /var/log/dmesg
Содержит сообщения ядра Linux. kern.log хранит логи, а dmesg показывает сообщения о загрузке и работе ядра.

###### 4. /var/log/boot.log
Содержит информацию о процессе загрузки системы.

###### 5. /var/log/cron.log
Логи задач, выполняемых по расписанию с помощью cron.

###### 6. /var/log/mail.log или /var/log/maillog
Содержит записи о работе почтовых сервисов.

###### 7. /var/log/httpd/ или /var/log/apache2/
Директории, содержащие логи веб-сервера Apache (в зависимости от дистрибутива).

###### 8. /var/log/nginx/
Директория с логами веб-сервера Nginx.

###### 9. /var/log/mysql/ или /var/log/mariadb/
Логи базы данных MySQL или MariaDB.

###### 10. /var/log/xorg.0.log
Лог X-сервера, содержащий информацию о графической подсистеме.

#### Специфические журналы

Некоторые приложения и службы могут иметь свои собственные журналы в подкаталогах /var/log. Например:
	Docker: Логи контейнеров можно найти в /var/log/docker.log.
	Systemd: Журналы управления системными службами можно просматривать с помощью journalctl, но также могут быть доступны и в /var/log/journal/.

## Защита системы

#### 1. Привилегии и управление пользователями
Создание пользователей и групп: Определение ролей и прав доступа для пользователей через создание групп.
Минимизация привилегий: Применение принципа наименьших привилегий для ограничения доступа пользователей к критически важным ресурсам.
##### Создание пользователей и групп
1.1 useradd — команда для создания нового пользователя.
1.2 usermod — команда для изменения параметров существующего пользователя.
1.3 groupadd — команда для создания новой группы.
1.4 groupdel — команда для удаления группы.
1.5 passwd — команда для изменения пароля пользователя.
##### Минимизация привилегий
1.1 chmod — команда для изменения прав доступа к файлам и директориям.
1.2 chown — команда для изменения владельца и группы файла или директории.
1.3 setfacl — команда для установки списков контроля доступа (ACL).
1.4 sudo — команда для выполнения команд от имени другого пользователя (обычно root).
1.5 visudo — команда для редактирования файла sudoers, который определяет, какие пользователи могут выполнять команды с помощью sudo.

#### 2. Списки контроля доступа (ACL)

Использование ACL: Настройка более гибких прав доступа к файлам и директориям, позволяя задавать разрешения для отдельных пользователей и групп.
Применение к файлам и каталогам: Управление доступом на уровне файловой системы для повышения безопасности.

##### Что такое ACL?
Списки контроля доступа (ACL, Access Control Lists) — это механизм, который позволяет задавать более детализированные права доступа к файлам и директориям в операционных системах, поддерживающих этот функционал (например, Linux и Unix).
**В отличие от традиционной модели прав доступа, где права определяются только для владельца, группы и остальных пользователей, ACL позволяет назначать разрешения для конкретных пользователей и групп.**

##### Как работают ACL?
Структура ACL:
	ACL содержит записи, каждая из которых указывает пользователя или группу и соответствующие им права доступа (чтение, запись, выполнение).
	Записи могут быть добавлены или изменены с помощью команды setfacl.

##### Преимущества использования ACL:
**Гибкость**: ACL позволяет управлять правами доступа на более детальном уровне. Например, можно предоставить доступ к файлу нескольким пользователям с различными уровнями разрешений.
**Упрощение управления**: При наличии большого числа пользователей и групп, использование ACL позволяет избежать создания множества групп для управления доступом к ресурсам.

##### Ограничения и особенности ACL:
###### 2.1 Не превышать права владельца:
ACL не может предоставлять больше прав, чем у владельца файла. То есть, если владелец файла имеет только права на чтение, то даже если в ACL будет указано разрешение на запись для другого пользователя, это не будет иметь эффекта.

###### 2.2 Совместимость с традиционными правами:
ACL работает в дополнение к традиционным правам доступа (владелец, группа, остальные).
При проверке доступа система сначала смотрит на стандартные права, а затем на записи ACL.
	2.1. Проверка стандартных прав доступа:
		Сначала система проверяет стандартные права доступа (владелец, группа, остальные).
		Если пользователь является владельцем файла, то применяются права владельца.
		Если он принадлежит группе файла, то применяются права группы.
		В противном случае применяются права для остальных пользователей.
	2.2 Проверка записей ACL:
		Если стандартные права доступа не предоставляют доступ, система затем проверяет записи в ACL.
		Если в ACL есть запись для конкретного пользователя (независимо от того, в какой группе он состоит),
		и эта запись предоставляет необходимые права, то доступ будет предоставлен.

###### 2.3 Проблемы с переносимостью:
Не все файловые системы поддерживают ACL. Например, некоторые старые версии файловых систем могут не поддерживать этот функционал, что может привести к проблемам при переносе файлов между системами.

###### 2.4 Управление и администрирование:
Для управления ACL требуется использование специальных команд (getfacl для просмотра и setfacl для изменения), что может потребовать дополнительных знаний от администраторов.


###### 2.5 Наследование:
В некоторых системах можно настроить наследование ACL для каталогов. Это означает, что новые файлы и подкаталоги будут наследовать разрешения от родительского каталога.

#### 3. Chroot-окружения

Изоляция процессов: Создание ограниченной среды для выполнения приложений, что предотвращает доступ к остальной файловой системе.
Применение в серверных приложениях: Использование chroot для изоляции веб-серверов и других сервисов.

Chroot (от "change root") — это системный вызов в Unix-подобных операционных системах, который позволяет изменить корневую директорию для процесса и всех его дочерних процессов. Это создает изолированное окружение, в котором процесс видит только определенную часть файловой системы, как если бы она была корневой.
	
##### Плюсы Chroot-окружений
**3.1 Изоляция процессов:**
	Chroot позволяет изолировать процессы друг от друга, что предотвращает доступ к остальной файловой системе.
	Это полезно для повышения безопасности, так как даже если приложение скомпрометировано, злоумышленник не сможет
	получить доступ к критически важным системным файлам.
	
**3.2 Безопасность серверных приложений:**
	Использование chroot для изоляции веб-серверов, баз данных и других сервисов помогает минимизировать потенциальные уязвимости.
	Например, если веб-сервер скомпрометирован, злоумышленник будет ограничен в доступе к файловой системе, что затрудняет выполнение атак.
	
**3.3 Упрощение управления зависимостями:**
	Chroot позволяет создать среду с необходимыми библиотеками и зависимостями без необходимости изменения глобальной среды системы.
	Это особенно полезно для тестирования программного обеспечения или запуска приложений с нестандартными требованиями.
	
**3.4 Поддержка старых приложений:**
	Chroot может быть использован для запуска устаревших приложений в изолированной среде с необходимыми версиями библиотек и зависимостей.

##### Минусы Chroot-окружений

**3.1 Не полная изоляция:**
	Chroot не обеспечивает полной изоляции, так как процесс все еще может взаимодействовать с другими процессами на уровне системы.
	Например, он может использовать сетевые интерфейсы или другие ресурсы системы, что может привести к потенциальным уязвимостям.

**3.2 Сложность настройки:**
	Настройка chroot-окружения может быть сложной задачей, особенно если требуется скопировать все необходимые библиотеки и файлы в новую корневую директорию.
	Это может потребовать значительных усилий и времени.

**3.3 Отсутствие контроля над ресурсами:**
	Chroot не предоставляет механизмов контроля ресурсов (например, CPU, памяти), как это делают контейнеры (например, Docker).
	Это может привести к ситуации, когда одно приложение использует слишком много ресурсов и влияет на другие процессы.

**3.4 Управление пользователями и правами:**
	В chroot-окружении управление пользователями и правами может быть менее гибким, чем в полноценной системе.
	Например, создание пользователей и групп внутри chroot может быть затруднительным.

##### Применение в серверных приложениях
	
Chroot-окружения часто используются для изоляции серверных приложений, таких как:
	Веб-серверы: Изоляция веб-серверов (например, Apache или Nginx) позволяет предотвратить доступ к системным файлам и другим веб-приложениям.
	Базы данных: Chroot может использоваться для защиты данных баз данных от несанкционированного доступа.
	FTP-серверы: Изоляция FTP-серверов для ограничения доступа пользователей к определенным директориям.

#### 4. Контейнеризация

##### Docker и LXC: 
Эти технологии позволяют создавать и управлять контейнерами,
которые изолируют приложения и их зависимости. Это упрощает развертывание и управление приложениями, обеспечивая некоторую степень безопасности за счет изоляции процессов и ресурсов.


 Оркестрация контейнеров: Инструменты, такие как Kubernetes, помогают управлять множеством контейнеров, автоматизируя развертывание, масштабирование и управление жизненным циклом приложений. Они также включают функции для обеспечения безопасности контейнеров, такие как контроль доступа и мониторинг.

Ограничения контейнеризации как средства защиты ОС
	Хотя контейнеры обеспечивают изоляцию приложений, они используют общее ядро хост-ОС, что делает их менее безопасными по сравнению с виртуальными машинами. Настройки контейнеров не могут полностью изолировать приложения друг от друга и от хост-системы, что может привести к потенциальным уязвимостям.

#### 4.1 Для более надежной изоляции можно рассмотреть следующие варианты:

4.1.1 Виртуальные машины (VM): Они обеспечивают полную изоляцию, так как каждая VM работает на своей собственной операционной системе с отдельным ядром. Это повышает уровень безопасности по сравнению с контейнерами.

4.1.2 Использование специализированных решений для безопасности: Например, такие технологии, как gVisor или Kata Containers, предоставляют дополнительные слои безопасности для контейнеров, создавая более изолированное окружение.

4.1.3 Сетевые политики и контроль доступа: Внедрение сетевых политик и механизмов контроля доступа (например, Role-Based Access Control в Kubernetes) помогает защитить контейнеры от несанкционированного доступа и атак.


#### 5. Концепции безопасности: модели контроля доступа, SeLinux AppArmor

##### [[Модели контроля доступа]]

##### SeLinux (Security-Enhanced Linux)
Настройка политик безопасности для контроля доступа на основе контекстов безопасности объектов (CentOS, Fedora и RHEL (Red Hat Enterprise Linux)).

Это механизм безопасности, разработанный для Linux, который реализует MAC.
Он использует контексты безопасности для управления доступом к ресурсам.

Работа:
	5.1 Каждый объект в системе (файл, процесс, сокет и т.д.) имеет свой контекст безопасности.
	5.2 Политики SELinux определяют, какие операции разрешены или запрещены для каждого контекста.
	5.3 При попытке доступа к объекту система проверяет соответствие между контекстами процесса и объекта, а также применяемыми политиками.

Плюсы:
	5.1 Высокий уровень безопасности: SELinux может предотвратить несанкционированный доступ даже при наличии уязвимостей в приложениях.
	5.2 Гибкость: позволяет создавать сложные политики безопасности, которые могут быть адаптированы под различные сценарии использования.
	5.3 Поддержка со стороны сообщества и интеграция с другими инструментами безопасности.

Минусы:
	5.1 Сложность настройки: создание и управление политиками SELinux требует значительных знаний и опыта.
	5.2 Возможные проблемы с совместимостью: некоторые приложения могут не работать корректно из-за строгих политик SELinux, что может потребовать дополнительных настроек или исключений.
	5.3 Порог входа: новички могут столкнуться с трудностями при использовании SELinux из-за его сложности.
##### AppArmor: 
Использование профилей для ограничения доступа приложений к системным ресурсам (на базе Debian).

Это другой механизм MAC для Linux, который использует профили для ограничения доступа приложений к системным ресурсам.

Работа:
	5.1 Каждое приложение имеет свой профиль, который определяет, к каким ресурсам оно может обращаться и какие действия может выполнять.
	5.2 Профили могут быть настроены для разрешения или запрета доступа к файлам, сетевым ресурсам и другим системным объектам.
	5.3 AppArmor использует простой синтаксис для написания профилей, что делает его более доступным для администраторов.

Плюсы:
	5.1 Простота настройки: профили AppArmor легче писать и поддерживать по сравнению с политиками SELinux.
	5.2 Интуитивно понятный синтаксис: администраторы могут быстро создавать и изменять профили.
	5.3 Эффективность: AppArmor может быть более производительным в некоторых сценариях, так как он работает на уровне приложений.

Минусы:
	5.1 Ограниченная гибкость: по сравнению с SELinux, возможности настройки политик в AppArmor могут быть менее мощными.
	5.2 Поддержка: хотя AppArmor активно используется, его поддержка и документация могут быть менее обширными по сравнению с SELinux.
	5.3 Зависимость от дистрибутива: AppArmor поддерживается не всеми дистрибутивами Linux, что может ограничить его использование.


#### 6. Защита сети, Файрволы VPN

##### Файрволы (или межсетевые экраны)
Настройка iptables или nftables для фильтрации трафика и защиты от несанкционированного доступа.

Это устройства или программное обеспечение, которые контролируют входящий и исходящий сетевой трафик на основе заранее определенных правил безопасности. Они служат барьером между внутренней сетью и внешними угрозами.

**Типы файрволов:**
	6.1 Пакетные фильтры: Эти файрволы анализируют пакеты данных и принимают
		решения о разрешении или блокировке трафика на основе заголовков пакетов
		(IP-адреса, порты и протоколы). Примеры: iptables, nftables.
	6.2 Состояние (stateful): Эти файрволы отслеживают состояние активных соединений и делают выводы о том,
		разрешить или запретить трафик на основе состояния соединения.
		Они более эффективны, чем простые пакетные фильтры.
	6.3 Приложенческие (application layer): Эти файрволы работают на уровне приложений и могут анализировать данные,
		передаваемые через протоколы, такие как HTTP или FTP. Они могут блокировать определенные типы содержимого или атак,
		например, SQL-инъекции.
	6.4 Следящие (proxy): Эти файрволы действуют как посредники между пользователями и интернетом,
		проверяя весь трафик, прежде чем он достигнет конечного пункта назначения.

Настройка iptables и nftables:
	6.1 iptables: Это утилита для настройки правил фильтрации пакетов в Linux.
		Она позволяет создавать правила для управления трафиком на основе различных критериев
		(IP-адреса, порты, протоколы и т. д.).
	6.2 nftables: Это более современная замена iptables, которая предлагает более простой и мощный синтаксис для управления сетевыми правилами.
		Она поддерживает более сложные структуры данных и упрощает управление правилами.
##### VPN:
Использование виртуальных частных сетей для шифрования данных при передаче по открытым сетям.

**Виртуальные частные сети (VPN)**
	VPN — это технология, которая создает защищенное соединение через менее безопасные сети,
	такие как интернет. Она шифрует данные, передаваемые между устройствами, что обеспечивает конфиденциальность и защиту от перехвата.

**Преимущества использования VPN**
		6.1 Шифрование данных: VPN шифрует трафик, что делает его недоступным для третьих лиц. Это особенно важно при использовании общественных Wi-Fi сетей.
		6.2 Анонимность: VPN скрывает ваш реальный IP-адрес, что позволяет сохранить анонимность в интернете.
		6.3 Доступ к заблокированным ресурсам: VPN позволяет обойти географические ограничения и получать доступ к контенту, который может быть недоступен в вашем регионе.

**Типы VPN**
	6.1 Remote Access VPN: Позволяет пользователям подключаться к корпоративной сети из удаленных мест.
		Это полезно для сотрудников, работающих из дома или в поездках.
	6.2 Site-to-Site VPN: Соединяет две или более сетей через интернет.
		Это часто используется для соединения офисов компании в разных географических локациях.
	6.3 SSL/TLS VPN: Использует протоколы SSL или TLS для обеспечения защищенного соединения через веб-браузер.
		Это удобно для пользователей, которые могут подключаться к сети без установки специального программного обеспечения.
	6.4 IPsec VPN: Использует протоколы IPsec для защиты передачи данных на уровне сетевого протокола.
		Это обеспечивает высокий уровень безопасности для передачи данных между сетями.


#### 7. Шифрование данных, LUKS TLS/SSL

Шифрование файловой системы (LUKS): Защита данных на уровне диска путем шифрования разделов или целых дисков.

Шифрование сетевого трафика (TLS/SSL): Обеспечение безопасности передачи данных между клиентами и серверами.

##### Шифрование файловой системы (LUKS)

**LUKS (Linux Unified Key Setup)** — это стандарт для шифрования дисков в операционных системах Linux. Он обеспечивает защиту данных на уровне диска путем шифрования разделов или целых дисков.

**Преимущества использования LUKS**
	7.1 Безопасность: LUKS использует сильные алгоритмы шифрования (например, AES), что делает данные недоступными для злоумышленников без соответствующего ключа.
	7.2 Удобство управления ключами: LUKS поддерживает несколько ключей для одного зашифрованного раздела, что позволяет создавать резервные копии и управлять доступом.
	7.3 Совместимость: LUKS является стандартом для многих дистрибутивов Linux, что обеспечивает широкую совместимость с различными инструментами и утилитами.

**Как работает LUKS**
	7.1 Инициализация: При инициализации LUKS создается зашифрованный раздел, который хранит метаданные и ключи шифрования.
	7.2 Шифрование: Данные записываются в зашифрованном виде. При записи данных они сначала шифруются с использованием выбранного алгоритма, а затем сохраняются на диске.
	7.3 Дешифрование: При доступе к данным LUKS запрашивает пароль или ключ, который используется для дешифрования данных перед их чтением.
	7.4 Обновление ключей: Пользователи могут добавлять или удалять ключи, что позволяет изменять доступ к зашифрованным данным без необходимости их расшифровки.

##### Шифрование сетевого трафика (TLS/SSL)

TLS (Transport Layer Security) и его предшественник SSL (Secure Sockets Layer) — это протоколы,
которые обеспечивают защищенную передачу данных по сети. Они широко используются для защиты веб-трафика,
электронной почты и других типов сетевых взаимодействий.

**Преимущества использования TLS/SSL**
	7.1 Конфиденциальность: Данные, передаваемые по защищенному соединению, шифруются, что предотвращает их перехват третьими лицами.
	7.2 Целостность: TLS/SSL обеспечивает проверку целостности данных, что гарантирует отсутствие изменений в передаваемой информации.
	7.3 Аутентификация: Протоколы позволяют проверить подлинность сторон, участвующих в передаче данных, что помогает предотвратить атаки "человек посередине" (MITM).

**Как работает TLS/SSL**
	7.1 Установка соединения: При подключении клиента к серверу начинается процесс "рукопожатия" (handshake), в ходе которого устанавливаются параметры шифрования и аутентификации.
	7.2 Обмен ключами: Во время рукопожатия клиент и сервер обмениваются криптографическими ключами, которые будут использоваться для шифрования данных.
	7.3 Шифрование данных: После установления соединения все данные, передаваемые между клиентом и сервером, шифруются с использованием алгоритмов шифрования (например, AES) и передаются по сети.
	7.4 Завершение соединения: После завершения передачи данных соединение может быть закрыто, при этом все ключи и параметры шифрования уничтожаются.

**Применение TLS/SSL**
	7.1 Защита веб-сайтов через HTTPS (HTTP Secure) для обеспечения безопасности онлайн-транзакций и передачи личной информации.
	7.2 Шифрование электронной почты с помощью протоколов SMTPS и IMAPS.

#### 8. Системы обнаружения вторжений (IDS)

Мониторинг активности: Использование IDS для анализа поведения системы и выявления подозрительных действий.
Анализ журналов: Регулярная проверка логов для обнаружения возможных атак или нарушений безопасности.

**Как работает IDS**
	**8.1 Сбор данных**: IDS собирает данные из различных источников, включая сетевой трафик, системные журналы, файлы и другие источники информации.
		Это может происходить в реальном времени или на основе периодической выборки данных.
	**8.2 Анализ данных**: Собранные данные анализируются с использованием различных методов:
		Сигнатурный анализ: IDS сравнивает поведение системы с известными шаблонами атак (сигнатурами). Если обнаруживается совпадение с известной угрозой, система генерирует предупреждение.
		Аномалийный анализ: IDS создает базу нормального поведения системы и сравнивает текущую активность с этой базой. Если поведение отклоняется от нормы, система фиксирует это как потенциальную угрозу.
		Контекстный анализ: IDS учитывает контекст данных (например, время суток, тип пользователей) для более точного определения угроз.
	**8.3 Генерация предупреждений**: При выявлении подозрительной активности или совпадения с сигнатурами IDS генерирует предупреждения для администраторов системы.
		Эти предупреждения могут быть отправлены по электронной почте, отображены в консоли или записаны в журнал событий.
	**8.4 Реакция на инциденты**: В зависимости от конфигурации системы и уровня угрозы, IDS может инициировать автоматические действия (например, блокировка IP-адреса)
		или просто уведомлять администраторов о необходимости ручного вмешательства.
	**8.5 Отчетность и анализ**: IDS предоставляет отчеты о выявленных инцидентах, что позволяет администраторам анализировать безопасность системы и выявлять уязвимости для дальнейшего улучшения защиты.

**Типы IDS**
	**8.1 Сетевые IDS (NIDS)**: Устанавливаются на сетевом уровне и анализируют весь сетевой трафик на предмет подозрительных действий.
		Они могут быть расположены на границе сети или внутри сети для мониторинга трафика между сегментами.
	**8.2 Хостовые IDS (HIDS)**: Устанавливаются на отдельных устройствах (хостах) и анализируют действия на уровне операционной системы.
		HIDS может следить за изменениями файловой системы, процессами и системными вызовами.
	**8.3 Системы обнаружения и предотвращения вторжений (IDPS)**: Это более продвинутая версия IDS, которая не только обнаруживает вторжения,
		но и может автоматически реагировать на них (например, блокировка доступа).

#### 9. Обновления и патчи

Регулярное обновление ПО: Установка обновлений и патчей для устранения известных уязвимостей. Автоматизация обновлений: Использование инструментов для автоматического применения обновлений безопасности.

#### 10. Резервное копирование и восстановление

Регулярные резервные копии: Создание резервных копий данных для защиты от потерь в случае атак или сбоев. План восстановления: Разработка стратегий восстановления после инцидентов для быстрого восстановления работоспособности системы.


## Виды сетей подключения
...