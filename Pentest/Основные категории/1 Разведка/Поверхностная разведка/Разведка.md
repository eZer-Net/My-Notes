### «Разведка» это способы получения информации о веб-приложении без попыток его взлома.

В идеале для каждого тестируемого приложения нужно получить систематизированный набор заметок. Они должны охватывать следующие аспекты:

1. Анализ требований

   - Сбор информации: Понять, что должно делать приложение. Это включает в себя определение целевой аудитории и основных функций.

2. Определение доменов

   - Идентификация доменов: Определите, какие домены будут использоваться в приложении (например, example.com, api.example.com).

3. Проектирование функциональности

   - Определение функций: Составьте список всех ключевых функций приложения (например, регистрация пользователей, комментарии, уведомления).
   
1. Определение архитектуры API

   - Список конечных точек API: Создайте список всех API-эндпоинтов с указанием типа HTTP-запросов (GET, POST, PUT, DELETE).

5. Определение форм конечных точек API

   - Форматы данных: Укажите форматы запросов и ответов для каждой конечной точки (JSON, XML и т. д.).
   - Примеры запросов/ответов: Приведите примеры использования для каждой конечной точки.

6. Исследование технологий

   - Технологический стек: Определите технологии, которые будут использоваться (фреймворки, базы данных, языки программирования).

7. Обнаружение конфигураций

   - Политики безопасности: Зафиксируйте обнаруженные конфигурации безопасности, такие как политика безопасности контента (CSP), CORS и другие.

8. Системы аутентификации и управления сеансом

   - Методы аутентификации: Определите используемые методы аутентификации (JWT, OAuth, сессии и т. д.).
   - Управление сеансами: Запишите информацию о том, как управляются сеансы пользователей (например, время жизни токена).

9. Тестирование

   - План тестирования: Разработать план тестирования для проверки всех функций и API.

----
# Введение в разведку

- [[Введение в разведку#Почему важна разведка?|Почему важна разведка?]]

- [[Введение в разведку#Подход к изучению приложения|Подход к изучению приложения]]

- [[Введение в разведку#Сбор информации|Сбор общей информации]]

- [[Введение в разведку#Карта веб-приложения|Формирование карты веб-приложения]]

----
# Структура современных веб-приложений

- [[Структура современных веб-приложений#Сравнение современных и более ранних версий приложений|Сравнение современных и более ранних версий приложений]]

- [[Структура современных веб-приложений#Разбор структуры современных веб-приложений|Разбор структуры современных веб-приложений]]

- [[Структура современных веб-приложений#Разница SOAP протокола от REST API|Сравнение SOAP протокола от REST API]]

-  [[Структура современных веб-приложений#JavaScript|JavaScript]]
	JavaScript (JS) — это единственный динамический язык для клиентских сценариев в браузерах, который был изначально разработан только для этих целей.

- [[Структура современных веб-приложений#Программный интерфейс DOM браузера|Программный интерфейс DOM браузера]]
	Как и любой хороший язык, JavaScript опирается на мощную стандартную библиотеку. Эта библиотека известна как DOM. 

- [[Структура современных веб-приложений#Фреймворки для SPA|Фреймворки для SPA]]

- [[Структура современных веб-приложений#Системы аутентификации и авторизации|Системы аутентификации и авторизации]]

- [[Структура современных веб-приложений#Веб-серверы|Веб-серверы]]

- [[Структура современных веб-приложений#Базы данных на стороне сервера|Базы данных на стороне сервера]]

- [[Структура современных веб-приложений#Хранение данных на стороне клиента|Хранение данных на стороне клиента]]

----

# Поиск субдоменов

Для оценки и тестирования конечных точек API первым делом нужно ознакомиться со структурой домена, который использует веб-приложение. **В современном мире один домен для обслуживания всего веб-приложения применяется редко. Куда чаще встречается разделение как минимум на клиентские и серверные домены.**

- [[Поиск субдоменов#Множество приложений в рамках одного домена|Множество приложений в рамках одного домена]]

- [[Поиск субдоменов#Встроенные в браузер инструменты анализа|Встроенные в браузер инструменты анализа]]

- [[Поиск субдоменов#Общедоступная информация|Общедоступная информация]]

- [[Поиск субдоменов#Кэши поисковых систем|Кэши поисковых систем]]

- [[Поиск субдоменов#Поиск в архиве|Поиск в архиве]]

- [[Поиск субдоменов#Социальные профили|Социальные профили]]
	Все крупные современные социальные сети сегодня зарабатывают деньги на продаже пользовательских данных, и у них зачастую есть для этого документация с API


- [[Поиск субдоменов#Атаки на передачу зоны|Атаки на передачу зоны]]
	Атака на передачу зоны (zone transfer attack) — это метод сбора информации о домене с использованием уязвимостей в настройках DNS-серверов. 

- [[Поиск субдоменов#Брутфорс субдоменов|Брутфорс субдоменов]] 

- [[Поиск субдоменов#Перебор по словарю|Перебор по словарю]]

----

# Анализ API

API (интерфейсы прикладного программирования) позволяют программным системам и приложениям обмениваться данными и обмениваться ими.

Анализ конечных точек API. Какие домены использует приложение? Например, если у приложения есть три домена (x.domain, y.domain и z.domain), то нужно отдавать отчет, что каждый из них может иметь собственные уникальные конечные точки API.

####  [[Анализ API#API-разведка|API разведка]]
#### [[Анализ API#Документация по API|Поиск документации]]

#### [[Анализ API#Определение конечных точек API|Определение конечных точек API]]
- Определение поддерживаемых методов HTTP
- Определение поддерживаемых типов контента
- Использование Intruder в burp для поиска скрытых конечных точек

#### [[Анализ API#Поиск скрытых параметров|Поиск скрытых параметров]]
- Уязвимости массового присвоения


Коллекция публичных API от аутентификации, обмена файлами до аниме
https://github.com/public-apis/public-apis

Инструмент [[Инструмент gobuster|gubuster]] подойдёт для поиска конечных точек 

#### [[Предотвращение уязвимостей в API|Предотвращение уязвимостей в API|]]

----

# Обход пути

Проверка на [[Обход пути|обход каталогов]] веб сервиса

----
# Обнаружение сторонних зависимостей

**Большинство современных веб-приложений представляет собой комбинацию внутреннего и внешнего кода**, объединенного с помощью какого-либо метода интеграции.

В процессе предварительного сбора данных, скорее всего, встретятся **множество сторонних фрагментов, и крайне желательно внимательно изучить как сам код, так и метод его интеграции. Часто это может подсказать вектор атаки**. Иногда уязвимость стороннего кода хорошо известна, и тогда, возможно, даже не придется готовить атаку самостоятельно. Ее можно будет просто скопировать из базы данных общеизвестных уязвимостей **(Common Vulnerabilities and Exposures, CVE)**.

## Клиентские фреймворки

Часто вместо самостоятельного построения сложной инфраструктуры пользовательского интерфейса разработчики берут хорошо поддерживаемые и тщательно протестированные готовые решения. **Это может быть:** 
- Библиотека SPA для обработки сложных состояний
- Фреймворк, добавляющий недостающую функциональность в JSc (Lodash, JQuery)
- Фреймворк CSS для улучшения внешнего вида сайта (Bootstrap, Bulma)

==Все три вида фреймворков легко распознаются. И если вы сможете определить номер версии, в Сети часто получится обнаружить сведения о существующих уязвимостях ReDoS, Prototype Pollution и XSS.== В частности, это касается старых версий, оставленных без обновлений.


**Одни из крупнейших фреймворки для SPA:**
- [[Обнаружение сторонних зависимостей#EmberJS|EmberJS (LinkedIn, Netflix)]];
- [[Обнаружение сторонних зависимостей#AngularJS|AngularJS (Google)]];
- [[Обнаружение сторонних зависимостей#React|React (Facebook)]];
- [[Обнаружение сторонних зависимостей#VueJS|VueJS (Adobe, GitLab)]].

Каждый из них имеет особый синтаксис и порядок управления элементами DOM и взаимодействия разработчика с платформой. Не все фреймворки легко обнаруживаются. Иногда требуется процедура идентификации (fingerprinting). **Узнав версию фреймворка, обязательно записать!**

#### [[Обнаружение сторонних зависимостей#Библиотеки JavaScript|Библиотеки JavaScript]]

#### [[Обнаружение сторонних зависимостей#Библиотеки CSS|Библиотеки CSS]]

## Фреймворки на стороне сервера

Определить, какой софт работает на стороне клиента (в браузере), намного проще, чем узнать, что работает на сервере.

В большинстве случаев необходимый для клиента код загружается и сохраняется в памяти, доступной через DOM. Некоторые сценарии могут загружаться сразу или асинхронно после загрузки страницы, но доступ к ним осуществляется только при выполнении определенных условий.

Определить зависимости на стороне сервера намного сложнее, но зачастую возможно и это. **Иногда остаются отчетливые следы в HTTP-трафике (заголовки, необязательные поля), иногда — незащищенные конечные точки.** Для обнаружения серверных фреймворков требуется хорошо в них разбираться, но, к счастью, как и в случае с клиентскими фреймворками, **чаще всего используется небольшой набор пакетов**. И если запомнить, как распознать самые популярные из них, это поможет во многих случаях.

#### [[Обнаружение сторонних зависимостей#Заголовки|Заголовки]]

#### [[Обнаружение сторонних зависимостей#Стандартные сообщения об ошибке и страницы 404|Стандартные сообщения об ошибке и страницы 404]]

#### [[Обнаружение сторонних зависимостей#Базы данных|Базы данных (первичный ключ)]]


----

# Поиск слабых мест в архитектуре приложения

**Большинства уязвимостей веб-приложения кроется в неправильной архитектуре, а не в плохо прописанных методах.** Несомненно, метод, записывающий пользовательский HTML-код непосредственно в DOM, позволяет при отсутствии надлежащей очистки загрузить сценарий и запустить его на машине другого пользователя (XSS-атака).

- [[Поиск слабых мест в архитектуре приложения#Признаки безопасной и небезопасной архитектуры|Признаки безопасной и небезопасной архитектуры]]

- [[Поиск слабых мест в архитектуре приложения#Уровни безопасности|Уровни безопасности]]

- [[Поиск слабых мест в архитектуре приложения#Заимствование и перекрой|Заимствование и перекрой]]

Приложения, напичканные самостоятельно написанными базами данных, самодельной криптографией и оптимизацией на аппаратном уровне, зачастую взламываются легче всего.

# Дополнительная информация

- [Pr-cy](https://pr-cy.ru/cms-checker/) - сайт определяет стек технологий веб сервиса