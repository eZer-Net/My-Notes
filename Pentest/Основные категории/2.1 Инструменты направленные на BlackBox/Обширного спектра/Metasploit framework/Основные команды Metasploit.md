#### `msfconsole` - запуск

#### `help` - вывод всех команд

#### `help команда` - вывод синтаксиса а так же краткое описание команды и опции с примерами

#### `help show` - вывод всех список доступных модулей скриптов msf
![[Pasted image 20250207114528.png]]

#### `show exploits` - вывод всех эксплоитов
![[Pasted image 20250207114920.png]]

1. **ID**: Числовой идентификатор эксплоита (например, 2488, 2489). Это уникальный номер, который позволяет легко ссылаться на конкретный эксплоит.

2. **Модуль**: Путь к модулю эксплоита (например, exploit/windows/wins/ms04_045_wins или exploit/unix/webapp/byob_unauth_rce). Это указывает на тип уязвимости и платформу, для которой предназначен эксплоит.

3. **Дата**: Дата добавления или обновления эксплоита в базу данных Metasploit (например, 2004-12-14 для первого эксплоита и 2024-08-15 для второго). Это может помочь понять, насколько актуален эксплоит.

4. **Качество**: Оценка качества или надежности эксплоита (например, great или excellent). Это субъективная оценка, основанная на тестировании и отзывах пользователей.

5. **Поддержка**: Указывает, поддерживает ли эксплоит использование в Metasploit (например, Yes).

6. **Описание**: Краткое описание уязвимости или эксплоита (например, MS04-045 Microsoft WINS Service Memory Overwrite или BYOB Unauthenticated RCE via Arbitrary File Write and Command Injection (CVE-2024-45256, CVE-2024-45257)). Это описание помогает понять, какую уязвимость использует данный эксплоит и какие потенциальные последствия его использования.


#### `search` - поиск по ключевым слова
Имеет такие настройки как:
`rank:` - сортировка модулей по их рангу возможности использования.
`date:`- сортировка модулей по дате их раскрытия (синоним с `disclosure_date:`).
`name:` - сортировать модули по их имени.
`type:` - сортировать модули по их типу (exploits, payloads ...).
`check:` - сортировать модули в зависимости от наличия метода проверки.
`action:` - сортировать модули в зависимости от наличия действий.

Пример:
`search type:exploit telnet`


#### `search ключевое слово` - команда для поиска по ключевому слову

Пример:
`search telnet` - поиск эксплоитов для telnet (telnet - сетевой протокол, который позволяет пользователям подключаться к удаленным компьютерам через текстовый интерфейс на порту 23)
![[Pasted image 20250207115522.png]]

1. **ID**: Числовой идентификатор эксплоита (например, 2488, 2489). Это уникальный номер, который позволяет легко ссылаться на конкретный эксплоит.

2. **Модуль**: Путь к модулю эксплоита (например, exploit/linux/local/vmwgfx_fd_priv_esc или exploit/windows/fileformat/xradio_xrl_sehbof). Это указывает на 
	- тип уязвимости
	- платформу, для которой предназначен эксплоит
	- тип протокола
	- само название эксплоита

4. **Дата**: Дата добавления или обновления эксплоита в базу данных Metasploit. Это может помочь понять, насколько актуален эксплоит.

5. **Качество**: Оценка качества или надежности эксплоита (например, great или excellent). Это субъективная оценка, основанная на тестировании и отзывах пользователей.

6. **Поддержка**: Указывает, поддерживает ли эксплоит использование в Metasploit (например, Yes).

7. **Описание**: Краткое описание уязвимости или эксплоита. Это описание помогает понять, какую уязвимость использует данный эксплоит и какие потенциальные последствия его использования.

#### `info полный путь` - описывает работу эксплоита 

Пример 
`info exploit/windows/telnet/goodtech_telnet`
```
msf6 > info exploit/windows/telnet/goodtech_telnet

       Name: GoodTech Telnet Server Buffer Overflow
     Module: exploit/windows/telnet/goodtech_telnet
   Platform: Windows
       Arch: 
 Privileged: Yes
    License: Metasploit Framework License (BSD)
       Rank: Average
  Disclosed: 2005-03-15

Provided by:
  MC <mc@metasploit.com>

Available targets:
      Id  Name
      --  ----
  =>  0   Windows 2000 Pro English All
      1   Windows XP Pro SP0/SP1 English

Check supported:
  No

Basic options:
  Name    Current Setting  Required  Description
  ----    ---------------  --------  -----------
  RHOSTS                   yes       The target host(s), see https://docs.metasploit.com/docs/using-metasploit/basics/using-metasploit.html
  RPORT   2380             yes       The target port (TCP)

Payload information:
  Space: 400
  Avoid: 13 characters

Description:
  This module exploits a stack buffer overflow in GoodTech Systems Telnet Server
  versions prior to 5.0.7. By sending an overly long string, an attacker can
  overwrite the buffer and control program execution.

References:
  https://nvd.nist.gov/vuln/detail/CVE-2005-0768
  OSVDB (14806)
  http://www.securityfocus.com/bid/12815


View the full module info with the info -d command.
```
##### • Основная информация о модуле:
- **Имя**: GoodTech Telnet Server Buffer Overflow
- **Модуль**: exploit/windows/telnet/goodtech_telnet
- **Платформа**: Windows
- **Архитектура**: Не указана (можно предположить, что это 32-битная архитектура, так как целевая платформа — Windows)
- **Привилегированный**: Да (требуются повышенные привилегии для эксплуатации)
- **Лицензия**: Metasploit Framework License (BSD)
- **Ранг**: Средний (Average)
- **Дата раскрытия уязвимости**: 15 марта 2005 года

##### • Доступные цели:
Модуль поддерживает следующие версии Windows:
- 0: Windows 2000 Pro English All
- 1: Windows XP Pro SP0/SP1 English

##### • Опции:
- **RHOSTS**: (обязательный) Указывает целевой хост или хосты.
- **RPORT**: (обязательный) Указывает целевой порт (по умолчанию 2380).

##### • Информация о полезной нагрузке:
- Space: 400 (максимальное количество байт, которое можно использовать в полезной нагрузке)
- Avoid: 13 символов (символы, которые следует избегать в полезной нагрузке)

##### • Описание:
Этот модуль использует уязвимость переполнения буфера стека в сервере Telnet от GoodTech Systems, версиях до 5.0.7. Отправляя слишком длинную строку, злоумышленник может перезаписать буфер и контролировать выполнение программы.

##### • Ссылки на дополнительные материалы:

- CVE-2005-0768 (https://nvd.nist.gov/vuln/detail/CVE-2005-0768) - описание уязвимости.
- OSVDB (14806) - база данных уязвимостей.
- SecurityFocus (http://www.securityfocus.com/bid/12815) - дополнительная информация о данной уязвимости.

#### `use путь_к_эксплоиту` - переходим в режим использования эксплоита 

При использование эксплоита меняется командная строка

В данном режиме будут доступны другие команды `help` выведет дополнительно строку `Exploit Commands`

#### `show payloads` - отображение всех совместимых полезные нагрузки при использование эксплоита `use`

Имеет такой вид:
![[Pasted image 20250207142119.png]]


1. Идентификатор
2. Дата раскрытия
3. Ранг
4. Проверка
5. Описание


#### Классификация Payload

1. Singles:
    - Это простейшие полезные нагрузки, которые выполняют одну задачу и не требуют создания дополнительных сессий. Они обычно используются для выполнения одной команды или операции на целевой системе.

2. Stagers:
	- Эти полезные нагрузки предназначены для установки связи между атакующим и целевой системой. Stagers обычно загружают и запускают более сложные полезные нагрузки (staged payloads) после успешного подключения. Это позволяет уменьшить размер первоначальной полезной нагрузки и обеспечивает большую гибкость.

3. Generic
	- что означает, что они могут быть использованы с различными эксплойтами и не зависят от конкретной уязвимости или системы.

4. Stages:
	- Это более сложные полезные нагрузки, которые загружаются и выполняются после stager. Они могут выполнять различные действия, такие как открытие командной оболочки, создание обратного соединения и т.д.

5. Command Shells:
	- Полезные нагрузки, которые предоставляют командную оболочку (shell) на целевой системе. Это позволяет злоумышленнику выполнять команды напрямую на машине жертвы.

6. Meterpreter:
	- Это расширенная полезная нагрузка, которая предоставляет мощный интерфейс для взаимодействия с целевой системой. Meterpreter позволяет выполнять множество действий, таких как захват экрана, загрузка/выгрузка файлов, управление процессами и т.д. Он также поддерживает шифрование и может работать через различные каналы связи.

7. Web Delivery:
	- Эти полезные нагрузки предназначены для доставки других полезных нагрузок через веб-сервер. Они часто используются для получения доступа к целевой системе через веб-браузер.

8. No-Operation (NOP):
	- Полезные нагрузки, которые не выполняют никаких действий, но могут использоваться для заполнения пространства или создания задержек в процессе эксплуатации.

9. Exploit Payloads:
	- Полезные нагрузки, которые непосредственно связаны с определенными эксплойтами и используются для эксплуатации уязвимостей в приложениях или системах.

#### `info полный_путь_к_пэйлоад` - вывод информации о работе payload 

Пример
`info payload/generic/custom`

```
       Name: Custom Payload
     Module: payload/generic/custom
   Platform: All
       Arch: x86, x86_64, x64, mips, mipsle, mipsbe, mips64, mips64le, ppc, ppce500v2, ppc64, ppc64le, cbea, cbea64, sparc, sparc64, armle, armbe, aarch64, cmd, php, java, ruby, dalvik, python, nodejs, firefox, zarch, r, riscv32be, riscv32le, riscv64be, riscv64le, loongarch64
Needs Admin: No
 Total size: 0
       Rank: Normal

Provided by:
  scriptjunkie <scriptjunkie@scriptjunkie.us>

Basic options:
Name         Current Setting  Required  Description
----         ---------------  --------  -----------
PAYLOADFILE                   no        The file to read the payload from
PAYLOADSTR                    no        The string to use as a payload

Description:
  Use custom string or file as payload. Set either PAYLOADFILE or
  PAYLOADSTR.



View the full module info with the info -d command.
```

##### • Основные характеристики

- Name: Custom Payload - название полезной нагрузки, указывающее на то, что это пользовательская (или настраиваемая) полезная нагрузка.

- Module: payload/generic/custom - указывает на модуль, к которому относится эта полезная нагрузка.

- Platform: All - эта полезная нагрузка может использоваться на всех платформах, что делает ее универсальной.

- Arch: Перечислены архитектуры процессоров, для которых подходит данная полезная нагрузка: x86, x86_64, x64, mips и другие. Это означает, что она может работать на различных типах систем.

- Needs Admin: No - указывает, что для выполнения этой полезной нагрузки не требуется административных прав.

- Total size: 0 - размер полезной нагрузки равен нулю, что может означать, что сама полезная нагрузка не содержит встроенного кода и зависит от внешнего файла или строки.

- Rank: Normal - уровень важности или сложности использования этой полезной нагрузки установлен как "нормальный".

##### • Информация о разработчике

- Provided by: scriptjunkie <scriptjunkie@scriptjunkie.us>
- Указывает на автора или разработчика этой полезной нагрузки.

##### • Основные параметры

1. PAYLOADFILE:
   - Current Setting: no
   - Required: нет
   - Description: Файл, из которого будет прочитана полезная нагрузка. Этот параметр позволяет загружать пользовательский код из файла.

2. PAYLOADSTR:
   - Current Setting: no
   - Required: нет
   - Description: Строка, которая будет использоваться в качестве полезной нагрузки. Этот параметр позволяет задавать пользовательский код напрямую в виде строки.

##### • Описание

1. Current Setting: no
   - Это текущее значение параметра. В данном случае "no" означает, что параметр не установлен или не задан. Если бы параметр был установлен, здесь было бы указано его текущее значение (например, имя файла или строка).

2. Required: нет
   - Это указывает, является ли параметр обязательным для работы модуля или полезной нагрузки. Если значение "нет", это означает, что для успешного выполнения модуля не обязательно указывать этот параметр. Если бы значение было "да", то без его установки модуль не смог бы корректно работать.

3. Description:

   - Это описание параметра, которое объясняет его назначение и использование. В данном контексте описание дает понять, какую информацию должен содержать параметр, и как он влияет на работу модуля. Например, если это PAYLOADFILE, то описание может объяснять, что в этот параметр необходимо указать путь к файлу с кодом полезной нагрузки.

#### `set payload полный_путь_к_пэйлоад` - установка payload к эксплоиту 

```
msf6 exploit(windows/telnet/goodtech_telnet) > set payload payload/generic/custom
payload => generic/custom
```

#### `show options` - вывод всех нужных параметром при эксплоите и payload  

Пример вывода:
```
Module options (exploit/windows/telnet/goodtech_telnet):

   Name    Current Setting  Required  Description
   ----    ---------------  --------  -----------
   RHOSTS                   yes       The target host(s), see https://docs.metasploit.com/docs/using-metasploit/basics/using-metasploit.html
   RPORT   2380             yes       The target port (TCP)


Payload options (generic/custom):

   Name         Current Setting  Required  Description
   ----         ---------------  --------  -----------
   PAYLOADFILE                   no        The file to read the payload from
   PAYLOADSTR                    no        The string to use as a payload


Exploit target:

   Id  Name
   --  ----
   0   Windows 2000 Pro English All



View the full module info with the info, or info -d command.
```

##### • Module Options (Опции модуля) эксплоита

1. **RHOSTS**
	- Current Setting: (пусто)
	- Required: yes  - обязательное поле
	- Description: Это обязательный параметр, который **указывает на целевой хост или хосты, к которым будет осуществляться попытка подключения**. Ссылка в описании ведет на документацию Metasploit, где можно найти дополнительную информацию о том, как использовать этот параметр.

2. **RPORT**
	- Current Setting: 2380
	- Required: yes - обязательное поле
	- Description: Это обязательный параметр, указывающий **целевой порт (TCP), на который будет отправлен запрос. В данном случае установлен порт 2380, который используется для подключения к службе Telnet** на целевом хосте.

##### • Payload Options (Опции полезной нагрузки)

1. PAYLOADFILE
	- Current Setting: (пусто)
	- Required: no
	- Description: Этот параметр не является обязательным. Он указывает на файл, из которого будет считываться полезная нагрузка. Если этот параметр не установлен, то полезная нагрузка может быть указана другим способом.

2. PAYLOADSTR
	- Current Setting: (пусто)
	- Required: no
	- Description: Этот параметр также не является обязательным. Он позволяет указать строку для использования в качестве полезной нагрузки. Как и в случае с PAYLOADFILE, если этот параметр не установлен, можно использовать другие методы для задания полезной нагрузки.

##### • Exploit Target (Цель эксплуатации)
- Id: 0
- Name: Windows 2000 Pro English All
- Это единственная целевая система, для которой предназначен данный модуль эксплуатации. В данном случае это Windows 2000 Professional на английском языке.

#### `set название_параметра данные` - для изменения параметра

#### `run или exploit` - запуск эксплоита