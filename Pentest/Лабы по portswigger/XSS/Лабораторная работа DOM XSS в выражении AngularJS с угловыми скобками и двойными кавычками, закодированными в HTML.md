В этой лабораторной работе уязвимость межсайтового скриптинга на основе DOM в выражении AngularJS в рамках функции поиска.

AngularJS — популярная библиотека JavaScript, которая сканирует содержимое узлов HTML, содержащих `ng-app`атрибут (также известный как директива AngularJS). Когда директива добавляется в код HTML, вы можете выполнять выражения JavaScript внутри двойных фигурных скобок. Этот метод полезен при кодировании угловых скобок.

## Дано

уязвимость функции поиска
AngularJS библиотека
выполнять выражения JavaScript внутри двойных фигурных скобок

## Задача

выполните атаку сценариев поперечного сайта, которая выполняет выражение AngularJS и вызывает `alert` функцию


# Разведка

![[Pasted image 20250129112348.png]]
- Используется Angular_1-7-7
- Атрибут ng-scope с которым работает Angular

- {{ 22 + 22 }} - работает от этого делаем вывод что в двойных фигурных скобках происходит обработка
# Атака

- {{ alert() }} - не сработало нет доступа

- Используем функцию `constructor` чтоб создать payload 
`метод.constructor('')` - constructor объекта print, чтобы создать новую функцию из строки

#### Методы Angular
1. $new(): Создает новую область, которая наследует свойства от родительской области.

2. $watch(): Наблюдает за изменениями в выражении или переменной и вызывает функцию обратного вызова при изменении.

3. $watchCollection(): Наблюдает за изменениями в коллекции (массив или объект) и вызывает функцию обратного вызова при изменениях.

4. $apply(): Запускает цикл обнаружения изменений и обновляет представление, если были внесены изменения в область.

5. $digest(): Запускает цикл обнаружения изменений, проверяя все наблюдения в области. Обычно вызывается автоматически, но может быть вызван вручную.

6. $emit(): Генерирует событие на текущей области и передает его вверх по дереву областей.

7. $broadcast(): Генерирует событие на текущей области и передает его вниз по дереву областей.

8. $on(): Подписывается на события, которые были сгенерированы с помощью $emit() или $broadcast().

9. $eval(): Выполняет выражение в контексте области и возвращает результат.

10. $evalAsync(): Запланирует выполнение выражения в следующем цикле обнаружения изменений.

11. $destroy(): Удаляет область и освобождает все связанные ресурсы.

12. $id: Уникальный идентификатор области, который может быть полезен для отладки.


#### Работа Payload в angularjs

- `{{ $eval.constructor('alert1')() }}` 
