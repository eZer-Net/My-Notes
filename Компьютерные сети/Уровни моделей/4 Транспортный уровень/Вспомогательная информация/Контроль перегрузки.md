
изначальной причиной перегрузки на сеть является трафик, переданный транспортным уровнем.

## Выделение требуемой пропускной способности

Перед тем как перейти к методам регулирования трафика, необходимо
понять, чего надо от алгоритма контроля перегрузки.

- Определить, какое состояние сети он должен поддерживать.

- Предотвращение перегрузок.

- Правильно распределять пропускную способность между транспортными подсистемами, работающими в сети.

- Быстро отслеживать изменения в запросах на выделение ресурсов.

#### Эффективность и мощность

При эффективном распределении пропускной способности между транспортными подсистемами должны использоваться все возможности сети. Однако это не значит, что в канале со скоростью 100 Мбит/с каждая из пяти подсистем получит по 20 
Мбит/с. Для хорошей производительности им необходимо выделить меньшую мощность.
![[Pasted image 20250101201209.png]]

С повышением нагрузки на сеть полезная пропускная способность увеличивается с постоянной скоростью (илл. а), но по мере того как их значения сближаются, рост полезной пропускной способности замедляется.
	 Этот спад необходим, чтобы предотвратить переполнение буферов сети и потерю данных в случае всплесков трафика. Если транспортный протокол повторно передает задерживающиеся, но не потерянные пакеты, может произойти отказ сети из-за перегрузки. В таком случае отправители продолжают передавать все больше и больше пакетов, а пользы от этого все меньше и меньше.

График задержки пакетов приведен на илл. (б). Сначала она постоянна и соответствует задержке распространения в сети. Когда значение нагрузки приближается к значению пропускной способности, задержка возрастает, сначала медленно, а затем все быстрее. Это также происходит из-за всплесков трафика, которые возрастают при высокой нагрузке.

**Чтоб получить наилучшую производительность сети, если будем выделять пропускную способность, пока задержка не начнет быстро расти**. Эта точка находится ниже пропускной способности сети. Чтобы ее определить, Клейнрок (Kleinrock) в 1979 году предложил ввести метрику мощность (power), которая вычисляется по формуле:

==Мощность = Нагрузка/Задержка==

Пока задержка достаточно мала и практически постоянна, мощность растет с ростом нагрузки на сеть; при резком повышении задержки она достигает максимума и резко снижается. Нагрузка, при которой мощность становится максимальной, и является наиболее эффективной нагрузкой, которую транспортная подсистема может передавать в сеть.

#### Равнодоступность по максимальному критерию

Равнодоступности на транспортном уровне: достижение справедливого распределения ресурсов между соединениями и хостами является сложной задачей, поскольку разные подходы могут приводить к неравномерному распределению пропускной способности. Протоколы, такие как TCP, позволяют множественные соединения, что может создавать конкуренцию за ресурсы.

#### Конвергенция

Алгоритм контроля перегрузки должен быстро конвергировать, то есть достигать результата — справедливого и эффективного распределения пропускной способности.

При обсуждении выбора рабочего режима мы исходили из того, что сетевая среда является статической. Однако на практике соединения то появляются, то исчезают, а пропускная способность, необходимая каждому отдельному соединению, может измениться, например, если пользователь долго просматривает веб-страницу, а затем вдруг начинает загрузку большого видеофайла.

**Из-за непостоянства требований к сети идеальный рабочий режим все время меняется. Хороший алгоритм контроля перегрузки должен быстро приводить к идеальному рабочему режиму и следить за его изменением с течением времени.** 

Пример распределения пропускной способности, которая меняется со временем и быстро сходится.
![[Pasted image 20250101215723.png]]


Изначально поток 1 получает всю емкость канала. Через секунду начинает работать поток 2. Ему тоже нужна пропускная способность. Поэтому распределение быстро меняется таким образом, чтобы оба потока получали по 1/2. Еще через три секунды появляется третий поток. Но он использует только 20 % пропускной способности — меньше, чем то, что ему полагается исходя из принципа равнодоступности (1/3).

## Регулирование скорости отправки

Скорость отправки может зависеть от двух факторов. 
- Первый фактор — управление потоком данных, которое требуется, если буфер получателя обладает недостаточной емкостью. 

- Второй — перегрузка, которую нужно учитывать при недостаточной пропускной способности сети. 

То, как транспортный протокол должен регулировать скорость отправки, зависит от формы обратной связи в сети. Различные сетевые уровни могут использовать обратную связь разных типов: явную и неявную, точную и неточную.

Пример явной точной обратной связи — ситуация, когда маршрутизаторы сообщают источникам свою допустимую скорость отправки. Так работает, к примеру, **явный протокол перегрузки (eXplicit Congestion Protocol, XCP)**.  
Явная и неточная схема — ==использование явного уведомления о перегрузке (Explicit Congestion Notification, ECN) с TCP==. В этом случае маршрутизаторы специальным образом маркируют пакеты, страдающие от перегрузки, сообщая отправителю, что ему следует уменьшить скорость передачи данных, но не указывая насколько.

В других схемах явный сигнал отсутствует. FAST TCP измеряет задержку в пути туда и обратно и использует ее в качестве параметра для контроля перегрузки (Вэй и др.; Wei et al., 2006). Наиболее распространенный в современном интернете метод контроля перегрузки использует TCP и маршрутизаторы с отбрасыванием конца очереди или RED-маршрутизаторы. Показателем перегрузки в этом случае является число потерянных пакетов. Существует множество вариантов такого TCP, в частности, CUBIC TCP, используемый в системе Linux (Ха и др; Ha et al., 2008). Возможны комбинации нескольких методов. Например, Windows содержит Compound TCP (составной TCP), где в качестве сигналов обратной связи используется и задержка, и число потерянных пакетов (Тань и др.; Tan et al., 2006). 
**Все эти варианты представлены в таблице**
![[Pasted image 20250101224841.png]]

Пользователи аддитивно увеличивают пропускную способность, а после получения сигнала о перегрузке начинают мультипликативно ее уменьшать. Такой метод называется **законом управления (AIMD control law)**

**Размер окна задается исходя из времени в пути туда и обратно (round-trip time, RTT)**, индивидуального для каждого соединения. Поэтому соединения с ближними хостами получают большую пропускную способность, чем соединения с удаленными хостами (при прочих равных условиях).

## Проблемы беспроводного соединения

**Транспортные протоколы, включающие контроль перегрузки (такие, как TCP), не должны зависеть от используемой сети и устройства канального уровня.** В теории это звучит хорошо, но на практике в случае беспроводных сетей возникают определенные проблемы. Главная заключается в том, что во **многих протоколах (включая TCP) сигналом перегрузки является потеря пакетов. Но в беспроводных сетях из-за ошибок передачи потеря пакетов происходит постоянно.**

Для корректной работы алгоритм контроля перегрузки должен учитывать только те потери пакетов, которые произошли из-за недостатка пропускной способности, но не из-за ошибок передачи.


  1. В беспроводных сетях (например, 802.11) **механизмы повторной передачи на канальном уровне работают очень быстро (микросекунды или миллисекунды). Таймеры на транспортном уровне (например, в TCP) срабатывают медленнее (миллисекунды или секунды)**. Это означает, что канальный уровень может обнаружить и исправить потерю пакетов быстрее, чем транспортный уровень успевает отреагировать.

2. В беспроводных каналах, таких как спутниковые, задержка может быть значительной. В таких случаях **необходимо использовать методы, такие как упреждающая коррекция ошибок (FEC),** чтобы минимизировать влияние потерь пакетов.

3.  Пропускная способность беспроводного канала может изменяться динамически, что требует адаптации транспортных протоколов 