
**Основная функция сетевого уровня заключается в маршрутизации пакетов от начальной до конечной точки.** Как эта задача выполняется в рамках одного административного домена или одной автономной системы. В большинстве сетей **пакетам приходится проходить через несколько маршрутизаторов**. Единственное исключение — широковещательные сети, но даже в них маршрутизация **представляет собой проблему, если отправитель и получатель находятся в разных сегментах сети**. **Алгоритмы, выбирающие путь, и используемые ими структуры данных составляют основу проектирования сетевого уровня.**

## Алгоритм маршрутизации (routing algorithm) 
Это компонент программного обеспечения сетевого уровня, отвечающий за выбор выходной линии для отправки поступившего пакета. 
**Если сеть использует дейтаграммную службу**, выбор маршрута должен производиться заново для каждого пакета, так как оптимальный путь мог измениться. 
**При использовании виртуальных каналов** маршрут определяется только при создании нового канала, и после этого по нему следуют все пакеты данных. Этот подход называют **сеансовой маршрутизацией (session routing)**, так как путь существует на протяжении всего сеанса связи (например, пока вы подключены к VPN).

**Маршрутизатор выполняет два основных процесса:** 
1. Пересылка (forwarding) — обработка приходящих пакетов и выбор исходящей линии на основе таблицы маршрутизации.
2. Маршрутизация — заполнение и обновление таблиц маршрутизации с помощью алгоритмов.
Эти процессы позволяют маршрутизатору эффективно направлять данные в сети.

Алгоритм маршрутизации обладал определенными свойствами: корректностью, простотой, надежностью, устойчивостью, равнодоступностью и эффективностью.

Алгоритм маршрутизации должен выполнять адаптация к изменениям: Он должен реагировать на изменения в топологии сети, такие как сбои оборудования или изменение загруженности линий связи.
Как это делается:

**Статическая маршрутизация (неадаптивные алгоритмы):**
- Путь для каждой пары станций определяется заранее и загружается в маршрутизаторы во время их инициализации.
- Не учитывает текущую топологию и трафик, что делает её подходящей для простых и предсказуемых сетей.

**Динамическая маршрутизация (адаптивные алгоритмы):**
  - Реагируют на изменения в сети, получая информацию о состоянии от соседних маршрутизаторов или всей сети.
  - Используют различные параметры для оптимизации маршрутов, такие как:
    - Расстояние до назначения.
    - Количество транзитных участков.
    - Ожидаемое время передачи.
  - Обновляют маршруты в зависимости от изменений в топологии или загруженности линий, что позволяет поддерживать бесперебойную работу сети.


## Принцип оптимальности
Принцип оптимальности — это ключевое понятие в теории оптимизации и алгоритмах маршрутизации, сформулированное Ричардом Беллманом в 1957 году. Он утверждает, что оптимальный путь между двумя узлами в сети может быть разбит на две части, где каждая из этих частей также должна быть оптимальной.

В контексте маршрутизации это означает следующее: если у нас есть оптимальный маршрут от узла I до узла K, и промежуточный узел J находится на этом маршруте, то маршрут от J до K также должен быть оптимальным. Если бы существовал более выгодный маршрут от J до K, чем тот, который мы рассматриваем, мы могли бы объединить его с маршрутом от I до J, что в итоге привело бы к более короткому пути от I до K. Это противоречит предположению, что путь от I до K является оптимальным.

На основе этого принципа можно построить так называемое входное дерево (sink tree), которое представляет собой набор оптимальных маршрутов от всех источников ко всем целевым адресатам в сети. Входное дерево имеет корень в целевом узле и показывает оптимальные пути к этому узлу от других узлов.

Важно отметить, что входные деревья не всегда уникальны; в одной сети может существовать несколько деревьев с одинаковой длиной пути. Более общая структура, которая включает все возможные маршруты, называется направленным ациклическим графом (DAG), который не содержит циклов.

На практике применение принципа оптимальности сталкивается с трудностями, такими как изменения в топологии сети, отключение или появление маршрутизаторов. Это может привести к различиям в представлении текущей топологии сети. Тем не менее, принцип оптимальности и концепция входного дерева служат важными ориентирами для оценки и разработки алгоритмов маршрутизации.
![[Pasted image 20241223105525.png]]


## Алгоритм поиска кратчайшего пути

## Лавинная адресация

## Маршрутизация по вектору расстояний

## Маршрутизация с учетом состояния линий

## Иерархическая маршрутизация внутри сети

## Широковещательная маршрутизация

## Многоадресная рассылка

## Произвольная маршрутизация