
Многие из протоколов канального уровня,рассчитаны на использование широковещательной среды для передачи данных. Они нуждаются в дополнительных механизмах, обеспечивающих эффективное и справедливое распределение канала между несколькими отправителями.

Протоколы, определяющие очередность использования линии, относятся к канальному уровню, точнее, к подуровню управления доступом к среде (MAC, Medium Access Control) MAC является нижней частью канального уровня.

## ==MAC (Medium Access Control)==

Это подуровень канального уровня, который отвечает за управление доступом к среде передачи данных. Он определяет правила и протоколы, которые позволяют устройствам в сети совместно использовать общую среду передачи (например, кабель или радиоволны) без конфликтов.

**Основные функции MAC** включают:
	**1. Управление доступом:**
		Определение, когда и как устройства могут передавать данные по общей среде. Это может включать алгоритмы, такие как CSMA/CD (Carrier Sense Multiple Access with Collision Detection) для Ethernet
		или CSMA/CA (Carrier Sense Multiple Access with Collision Avoidance) для Wi-Fi.
	**2. Форматирование кадров:**
		Определение структуры данных (кадров), которые передаются по сети, включая адресацию отправителя и получателя.
	**3. Обнаружение и обработка коллизий:**
		В случае одновременной передачи данных несколькими устройствами MAC протоколы должны обеспечивать обнаружение коллизий и их разрешение.
	**4. Контроль ошибок:**
		Обеспечение целостности передаваемых данных с помощью различных методов проверки, таких как контрольные суммы.


****
# Проблема распределения канала и их решения

Основная проблема — распределение одного широковещательного канала между претендующими на него многочисленными пользователями. 

#### [[Проблема распределения канала и их решения#Статическое распределение канала|Статическое распределение канала]]
Статическое распределение канала предполагает, что ресурсы сети (например, полоса пропускания) заранее выделяются определенным пользователям или устройствам.
#### [[Проблема распределения канала и их решения#Динамическое распределение канала|Динамическое распределение канала]]
Динамическое распределение канала позволяет пользователям получать доступ к ресурсам по мере необходимости, в зависимости от текущей нагрузки на сеть.

## [[Проблема распределения канала и их решения#Протоколы коллективного доступа|Протоколы коллективного доступа]]

#### [[Проблема распределения канала и их решения#Система ALOHA|Система ALOHA]]
это один из первых протоколов подуровня MAC (Medium Access Control), разработанный для управления доступом к общему каналу связи в радиосистемах ближнего радиуса действия. Существует две системы Aloha [[Проблема распределения канала и их решения#Существует две основные версии системы ALOHA|чистая]] и [[Проблема распределения канала и их решения#Существует две основные версии системы ALOHA|дискретная]]

## [[Проблема распределения канала и их решения#Протоколы множественного доступа с контролем несущей|Протоколы множественного доступа с контролем несущей]]

**Протоколы, в которых станции прослушивают среду передачи данных и действуют в соответствии с этим**, называются протоколами с контролем (опросом) несущей (carrier sense protocols).

#### Настойчивый и не настойчивый CSMA
- [[Проблема распределения канала и их решения#Протокол CSMA с настойчивостью 1 (Carrier-Sense Multiple Access — множественный доступ с контролем несущей)|Протокол CSMA с настойчивостью 1 (Carrier-Sense Multiple Access — множественный доступ с контролем несущей)]]

- [[Проблема распределения канала и их решения#Не настойчивый протокол CSMA|Не настойчивый протокол CSMA]]

- [[Проблема распределения канала и их решения#CSMA с настойчивостью p|CSMA с настойчивостью p]]

- [[Проблема распределения канала и их решения#Протокол CSMA с обнаружением коллизий CSMA/CD|Протокол CSMA с обнаружением коллизий CSMA/CD]]

## [[Проблема распределения канала и их решения#Протоколы без коллизий|Протоколы без коллизий]]

#### [[Проблема распределения канала и их решения#Протокол битовой карты|Протокол битовой карты]] 
Основные понятия протокола
	1. Битовая карта Это структура, которая используется для координации передачи данных несколькими станциями (устройствами) в сети. Она состоит из N слотов, где каждая станция имеет свой слот (от 0 до N-1).
	2. Слоты: Каждый период конкуренции делится на N временных слотов. В каждом слоте одна из станций может сообщить о своем намерении передать данные.
	3. Передача: Если у станции есть данные для передачи, она отправляет единичный бит в своем слоте. Например, станция 0 передает бит в слоте 0, станция 1 — в слоте 1 и так далее.
	4. Резервирование: Протокол резервирует время для каждой станции, что позволяет избежать коллизий (ситуаций, когда две или более станции пытаются передать данные одновременно).
Процесс работы протокола
	1. Объявление намерений: В течение одного цикла все станции отправляют сообщения о том, готовы ли они к передаче данных. Это происходит в течение N слотов.
	2. Передача данных: После того как все станции сообщили о своих намерениях, они начинают передачу данных в порядке своих номеров. Поскольку все знают, кто хочет передавать, коллизий не возникает.
	3. Новый цикл: После завершения передачи всех фреймов начинается новый цикл подачи заявок.
Ожидание и производительность
	• Слабая загрузка канала: Когда канал слабо загружен (мало фреймов для передачи), станции с меньшими номерами (например, 0 или 1) могут ждать в среднем 1,5N слотов, поскольку они могут не успеть передать свои данные до конца текущего цикла. Станции с большими номерами (например, 2 или 3) ждут в среднем N/2 слотов. В результате среднее время ожидания для всех станций составляет N слотов.
	• Сильная загрузка канала: Когда все станции хотят передавать данные, накладные расходы на передачу одного фрейма составляют всего один бит.

#### [[Проблема распределения канала и их решения#Передача маркера|Передача маркера]] 
(как эстафета у кого палочка тот и бежит)
Смысл протокола битовой карты в том, что он позволяет каждой станции передавать данные по очереди в предопределенном порядке. Другой способ добиться того основан на передаче небольшого сообщения, маркера (token), от одной станции к следующей в той же заранее заданной очередности. Маркер является разрешением на отправку. Когда станция получает маркер, она имеет право отправить фрейм, прежде чем передавать маркер следующей станции. Если фреймов для отправки нет, то она просто передает маркер.

    В протоколе маркерного кольца (token ring) для определения порядка, в 
    котором станции отправляют данные, используется топология сети. Станции 
    подключены одна к другой, образуя простое кольцо. Таким образом, передача 
    маркера заключается в получении его с одной стороны и пересылке в 
    противоположную Фреймы передаются в том же направлении, что и маркер. Они 
    передаются по кольцу, проходя по всем станциям, которые оказываются на их 
    пути. Но чтобы фрейм не циркулировал вечно (как маркер), какая-то станция 
    должна извлечь его из кольца. Это может быть первоначальный отправитель 
    (если фрейм прошел полный цикл), либо станция-получатель.

    для реализации передачи маркера физическое кольцо не требуется. Достаточно 
    иметь логическое кольцо, в котором каждая станция знает, какие станции 
    находятся перед ней и после нее. Канал, соединяющий станции, может 
    представлять собой одну длинную шину. В этом случае каждая станция передает 
    маркер по шине соседям в предопределенном порядке. Получив маркер, станция 
    может использовать шину для отправки одного фрейма. Такой протокол 
    называется маркерной шиной (token bus)

    Он описан в стандарте IEEE 802.4, который оказался настолько неудачным, что 
    был отменен институтом IEEE.
#### [[Проблема распределения канала и их решения#Двоичный обратный отсчет|Двоичный обратный отсчет]]
(подобно игре суефа при помощи рандома выигрывает станция)
	Недостатком двух представленных выше протоколов являются накладные расходы в один бит на станцию. Из-за этого они плохо масштабируются на большие сети с сотнями или даже тысячами станций. Можно добиться лучших результатов, используя двоичные адреса станций и канал, способный определенным образом комбинировать передаваемые данные. Станция, желающая занять канал, объявляет свой адрес в виде битовой строки, начиная со старшего бита. Предполагается, что все адреса станций содержат одинаковое количество битов.

    Будучи отправленными одновременно, биты адреса в каждой позиции логически 
    складываются (логическое ИЛИ) средствами канала.

    Во избежание конфликтов следует применить правило арбитража: как только 
    станция с 0 в старшем бите адреса видит, что в суммарном адресе этот 0 
    заменился единицей, она сдается и ждет следующего цикла. Например, если 
    станции 0010, 0100, 1001 и 1010 конкурируют за канал, то в первом битовом 
    интервале они передают биты 0, 0, 1 и 1 соответственно. В этом случае 
    суммарный первый бит адреса будет равен 1. Следовательно, станции с номерами 
    0010 и 0100 считаются проигравшими, а станции 1001 и 1010 продолжают борьбу. 
    Следующий бит у обеих оставшихся станций равен 0 — таким образом, обе 
    продолжают. Третий бит равен 1, поэтому станция 1001 сдается. Победителем 
    оказывается станция 1010, так как ее адрес наибольший. Выиграв торги, она 
    может начать передачу фрейма, после чего начнется новый цикл торгов.



## [[Проблема распределения канала и их решения#Протоколы с ограниченной конкуренцией|Протоколы с ограниченной конкуренцией]]

**В условиях низкой загрузки протоколы с конкуренцией (то есть чистая или дискретная системы ALOHA) предпочтительнее**, потому что время задержки (и число коллизий) в таких системах меньше.
По мере роста загруженности канала эти системы становятся все менее привлекательными, поскольку возрастают накладные расходы, связанные с коллизиями. 
**Для протоколов без коллизий справедливо обратное.** При низкой нагрузке у них относительно высокое время задержки, но по мере роста загруженности эффективность использования канала возрастает (накладные расходы фиксированные).
**Объединить лучшие свойства обеих стратегий и получить протокол, использующий разные стратегии в зависимости от загруженности канала. Такие протоколы мы будем называть протоколами с ограниченной конкуренцией (limited-contention protocols)**
- **[[Проблема распределения канала и их решения#Протокол адаптивного прохода по дереву|Протокол адаптивного прохода по дереву]]**

- **[[Проблема распределения канала и их решения#Протоколы беспроводных локальных сетей|Протоколы беспроводных локальных сетей]]**

****
# Сеть Ethernet

Существует два типа
**Ethernet: классический** Ethernet (classic Ethernet), который решает проблему множественного доступа с помощью методов.
	Классический Ethernet — изначальный вариант, достигавший скорости 3–10 Мбит/с. 
**Коммутируемый Ethernet** (switched Ethernet), в котором для соединения компьютеров используются коммутаторы (switches)
	Коммутируемый Ethernet — результат развития классического. Различают быстрый, гигабитный, 10-гигабитный, 40-гигабитный и 100-гигабитный коммутируемый Ethernet

#### [[Сеть Ethernet#Классический Ethernet|Классический  Ethernet]]
Физический уровень классического Ethernet
	В начале использовался длинный толстый коаксиальный кабель, а пропускная способность составляла 3 Мбит/с. Система получила название «Ethernet», в честь люминофорного эфира, через который, как когда-то считалось, распространяются электромагнитные лучи.
	**Классический Ethernet — это проходящий по всему зданию длинный кабель, к которому подключаются компьютеры.**


**Формат фрейма**
	![[Pasted image 20241212091140.png]]
	    


#### [[Сеть Ethernet#Коммутируемый Ethernet|Коммутируемый Ethernet]]
Физический уровень концентратор Ethernet
	Очень скоро Ethernet стал отходить от архитектуры с одним длинным кабелем, которая использовалась в классическом варианте. Проблема поиска обрывов или ведущих в пустоту соединений привела к новому способу подключения, в котором **каждая станция соединяется с центральным концентратором (hub) отдельным кабелем**. **Концентратор просто соединяет все провода в электрическую схему, как если бы они были спаяны вместе (в последствие коммутаторы).**


****
# Беспроводные локальные сети

Сети 802.11 можно использовать в двух режимах.
        Наиболее популярный — инфраструктурный режим (infrastructure mode). 
	        Это подключение клиентов (например, ноутбуков и смартфонов) к другой сети, например внутренней сети компании или интернету. Каждый клиент связывается с точкой доступа (Access Point, AP), которая, в свою очередь, подключена к сети. Клиент отправляет и получает пакеты через AP.
        Второй режим, называется децентрализованной сетью (ad hoc network). 
	        Это набор компьютеров, которые связаны таким образом, чтобы напрямую отправлять фреймы друг другу. Точка доступа не ­используется.
	![[Pasted image 20241212095259.png]]


- [[Беспроводные локальные сети#Модель уровней протоколов|Модель уровней протоколов]]

- [[Беспроводные локальные сети#Методы|Методы 802.11]]

- [[Беспроводные локальные сети#Формат фрейма данных стандарта 802.11|Формат фрейма данных стандарта 802.11]]

- [[Беспроводные локальные сети#Безопасность и конфиденциальность|Безопасность и конфиденциальность]]

- [[Беспроводные локальные сети#Приоритизация и управление питанием|Приоритизация и управление питанием]]

****
# Bluetooth

[[Bluetooth#Архитектура Bluetooth физ уровня|Архитектура Bluetooth физ. уровня]]
	**В основе Bluetooth лежит пикосеть (piconet), состоящая из одного главного узла и нескольких (до семи) подчиненных узлов**, расположенных в радиусе 10 м.
	![[Pasted image 20241212101730.png]]

- [[Bluetooth#Модель уровней протоколов|Модель уровней протоколов]]

- [[Bluetooth#Применение Bluetooth (различные сценарии)|Применение Bluetooth (различные сценарии)]]

- [[Bluetooth#Bluetooth уровень радиосвязи|Bluetooth: уровень радиосвязи]]

- [[Bluetooth#Bluetooth канальный уровень|Bluetooth: канальный уровень]]

- [[Bluetooth#Bluetooth канал связи|Bluetooth: канал связи]]

- [[Bluetooth#Bluetooth структура фрейма|Bluetooth: структура фрейма]]

- [[Bluetooth#Bluetooth 5|Bluetooth 5]]

****
# DOCSIS
Изначально сети кабельного телевидения предназначались для трансляции телевизионных программ, теперь они также широко используются
в качестве альтернативного способа подключения квартир и домов к интернету
вместо телефонных сетей.

- [[DOCSIS#ОБЩИЕ СВЕДЕНИЯ|Общие сведения]]

- [[DOCSIS#СЛУЖЕБНЫЕ ПОТОКИ|Служебные потоки]]

****

# Коммутация на канальном уровне

У многих организаций есть несколько LAN, которые желательно объединить. Может быть, удобно соединить их в одну большую LAN? Это можно сделать с помощью специальных устройств, называемых мостами (bridges). **Коммутаторы Ethernet — это современное название мостов.**
Они обеспечивают функциональность, которая выходит за рамки классического Ethernet и концентраторов Ethernet, — дают возможность соединить несколько LAN в большую и быструю сеть. **Термины «мост» и «коммутатор» синонимы**.
**Мосты работают на канальном уровне. Они анализируют адреса, содержащиеся во фреймах этого уровня, и в соответствии с ними осуществляют маршрутизацию. Поскольку мосты не проверяют у фрейма поле Payload**, они одинаково хорошо справляются как с пакетами IP, так и с другими типами пакетов 
**В отличие от мостов, маршрутизаторы анализируют адреса в пакетах и действуют, основываясь на этой информации**, поэтому они могут работать только с теми протоколами, для которых предназначены.


- [[Коммутация на канальном уровне#ПРИМЕНЕНИЕ МОСТОВ|Применение мостов]]

- [[Коммутация на канальном уровне#ОБУЧАЮЩИЕСЯ МОСТЫ|Обучающиеся мосты]]

- [[Коммутация на канальном уровне#МОСТЫ СВЯЗУЮЩЕГО ДЕРЕВА|Мосты связующего дерева]]

- [[Коммутация на канальном уровне#Повторители, концентраторы, мосты, коммутаторы, маршрутизаторы и шлюзы сравнения|Повторители, концентраторы, мосты, коммутаторы, маршрутизаторы и шлюзы сравнения]]

- [[Коммутация на канальном уровне#Виртуальные локальные сети|Виртуальные локальные сети]]


****

# РЕЗЮМЕ

**В сетях используемых единственный канал. Основная проблемой является распределение этого канала между конкурирующими станциями, желающими им воспользоваться.** Самые простые и эффективные схемы распределения **при небольшом количестве станций и постоянном трафике — это FDM и TDM.**
При большом и непостоянном числе станций или при трафике, создающем периодическую пиковую нагрузку (типичный случай для компьютерных сетей), FDM и TDM не подходят.

**Алгоритмы динамического распределения каналов.** Многочисленные варианты протокола **ALOHA (чистого или дискретного)** используются в реальных системах (например, в сетях DOCSIS). Его усовершенствование — возможность прослушивать состояния канала. Станции могут отказываться от передачи, если слышат, что канал занят другой станцией. Применение метода контроля несущей привело к созданию различных **CSMA** протоколов для LAN и MAN. 

**Класс протоколов, который полностью устраняет или, по крайней мере, снижает конкуренцию за канал.** Протокол битовой карты, протокол с двоичным обратным отсчетом и протоколы на базе маркерных колец полностью исключают конкуренцию, а протокол адаптивного дерева — снижает.

**Для решения проблемы скрытой станции используется протокол RTS/CTS.** Однако этот метод приводит к большим накладным расходам из-за проблемы засвеченной станции, которая особенно остро проявляется в ситуациях с большим числом радиоустройств.

**Когда в здании много локальных сетей, нужен способ для их объединения.**
**Для этого используются plug-and-play-устройства — мосты.** При построении
мостов применяются алгоритмы обратного обучения и связующего дерева. Как
только этот функционал был добавлен в современные коммутаторы, термины
«мост» и «коммутатор» стали синонимами. 

Чтобы упростить управление LAN с мостами, были созданы VLAN, которые позволили отделить физическую топологию от логической. В стандарте IEEE 802.1Q, разработанном для VLAN, был введен новый формат Ethernet-фреймов.