

Основная проблема — распределение одного широковещательного канала между претендующими на него многочисленными пользователями. 

#### Статическое распределение канала
Статическое распределение канала предполагает, что ресурсы сети (например, полоса пропускания) заранее выделяются определенным пользователям или устройствам.

Это означает, что каждому пользователю или устройству назначается фиксированное количество ресурсов, которое они могут использовать в течение всего времени сессии.
	Примеры статического распределения включают:
		• FDMA (Frequency Division Multiple Access): Каждому пользователю выделяется отдельная частота.
		• TDMA (Time Division Multiple Access): Каждому пользователю выделяется определенный временной интервал для передачи данных.
	Преимущества:
		• Предсказуемость: Пользователи знают, сколько ресурсов они 
		имеют.
		• Отсутствие коллизий: Поскольку ресурсы заранее распределены, 
		вероятность конфликтов минимальна.
	Недостатки:
		• Неэффективность: Если пользователь не использует свои ресурсы, 
		они остаются неиспользованными.
		• Невозможность адаптации: Система не может адаптироваться к 
		изменению нагрузки.

#### Динамическое распределение канала
Динамическое распределение канала позволяет пользователям получать доступ к ресурсам по мере необходимости, в зависимости от текущей нагрузки на сеть.
	Это более гибкий подход, который может включать:
		• CSMA/CD (Carrier Sense Multiple Access with Collision Detection): Устройства слушают канал перед передачей и реагируют на коллизии.
		• ALOHA: Простая схема доступа, где устройства передают данные, когда хотят, и обрабатывают коллизии.
	Преимущества:
		• Эффективность: Ресурсы используются более эффективно, так как 
		они выделяются в зависимости от потребностей.
		• Гибкость: Система может адаптироваться к изменению нагрузки.
	Недостатки:
		• Непредсказуемость: Пользователи не всегда могут быть уверены в 
		доступности ресурсов.
		• Коллизии: Возможны конфликты при одновременной передаче данных 
		несколькими устройствами.


## Протоколы коллективного доступа

#### Система ALOHA
Это один из первых протоколов подуровня MAC (Medium Access Control), разработанный для управления доступом к общему каналу связи в радиосистемах ближнего радиуса действия.
	В системе ALOHA терминал каждого пользователя отправляет фреймы данных на центральный компьютер или базовую станцию, используя общую полосу частот.
	Протокол работает по принципу «передавай, когда хочешь». Однако из-за этого подхода возможны коллизии, когда два или более устройства пытаются передать данные одновременно.

**Коллизии это столкновение фреймов**

#### Существует две основные версии системы ALOHA:
1. Чистая ALOHA (Pure ALOHA):
		В этой версии пользователи могут передавать данные в любое время, что делает систему простой и гибкой. Однако это также приводит к высокой вероятности коллизий.

        Когда два фрейма одновременно пытаются занять канал, происходит 
        коллизия. Оба фрейма искажаются, даже если только один первый бит 
        второго фрейма перекроет последний бит первого, оба фрейма полностью 
        теряются (то есть их контрольные суммы не совпадут с правильными 
        значениями). В контрольной сумме нет (и не должно быть) различия между 
        полным и частичным искажением информации. Потеря есть потеря. После 
        передачи фрейма пользователь ждет подтверждения от центрального 
        компьютера. Если подтверждение не получено в течение определенного 
        времени, пользователь повторяет попытку передачи.

		Эффективность чистой ALOHA составляет около 18,4%, что означает, что 
		лишь небольшая часть времени канала используется для успешной передачи 
		данных.
2. Дискретная ALOHA (Slotted ALOHA):
	Эта версия разделяет время на дискретные интервалы, соответствующие одному фрейму. Их называют слотами (slots).

		Пользователи синхронизируются с временными слотами, и если два 
		устройства пытаются передать данные одновременно в одном временном 
		интервале, происходит коллизия, и оба устройства должны повторить 
		попытку в следующем слоте.

        Эффективность дискретной ALOHA достигает 36,8%, что делает ее более 
        производительной по сравнению с чистой версией.




## Протоколы множественного доступа с контролем несущей

**Протоколы, в которых станции прослушивают среду передачи данных и действуют в соответствии с этим**, называются протоколами с контролем (опросом) несущей (carrier sense protocols).
#### Настойчивый и не настойчивый CSMA

###### Протокол CSMA с настойчивостью 1 (Carrier-Sense Multiple Access — множественный доступ с контролем несущей) 
Когда у станции появляются данные для передачи, она сначала прослушивает канал, проверяя, свободен ли он. Когда канал простаивает, станция сразу отправляет данные. Если же он занят — она ждет освобождения линии, а затем передает фрейм. В случае коллизии станция ждет в течение случайного интервала времени, затем снова прослушивает канал, и если он свободен, повторяет передачу. Коллизии присуще так как обе станции могут одновременно прослушивать 1 канал и отправлять одновременно фреймы.

	Существует небольшая вероятность того, что как только одна станция 
	начнет передачу, другая также придет в состояние готовности и опросит 
	канал. Если сигнал от первой станции еще не успел достичь второй, она 
	решит, что канал свободен, и также начнет передачу, в результате 
	произойдет коллизия. Эта вероятность зависит от числа фреймов, 
	помещающихся в канал, то есть от показателя «полоса пропускания, 
	умноженная на задержку» (bandwidth-delay product) для данного канала.

	 сли канал вмещает лишь небольшую часть фрейма, как бывает в большинстве 
	 LAN, где задержка распространения невелика, то и шанс коллизии мал. Чем 
	 больше время распространения сигнала, тем выше вероятность коллизий и 
	 ниже производительность протокола.

###### Не настойчивый протокол CSMA
В нем предпринята попытка сдержать стремление станций начинать передачу, как только канал освобождается Если в данный момент никто ничего не передает, станция сразу же начинает передачу сама. Однако если канал занят, станция не ждет его освобождения, постоянно прослушивая его и пытаясь захватить сразу, как только он освободится, как в предыдущем протоколе. Вместо этого она ждет в течение случайного интервала времени, а затем снова прослушивает линию. 

В результате количество коллизий уменьшается и повышается эффективность использования канала, при этом увеличивается интервал ожидания

###### CSMA с настойчивостью p
Он применяется в дискретных каналах и работает следующим образом. Когда станция готова передавать, она опрашивает канал. **Если канал свободен, она с вероятностью p начинает передачу. С вероятностью q = 1 – p она отказывается от передачи и ждет начала следующего слота.** Этот процесс повторяется до тех пор, пока фрейм не будет передан или какая-либо другая станция не начнет передачу. В последнем случае станция ведет себя так же, как в случае коллизии. Она ждет в течение случайного интервала времени, после чего начинает все заново.

###### Протокол CSMA с обнаружением коллизий CSMA/CD
Станции способны быстро распознать коллизию и немедленно прекратить передачу (а не доводить ее до конца), так как данные все равно искажены. 
	Эта стратегия обеспечивает более экономное использование времени и пропускной способности канала.

В протоколе CSMA/CD  применяется концептуальная модель. В момент времени t0 одна из станций заканчивает передачу фрейма. Все остальные станции, готовые к передаче, теперь могут попытаться отправить свои фреймы. 
Если две или несколько станций одновременно начнут передачу, то произойдет коллизия. Обнаружив ее, станция прекращает передачу, ждет в течение случайного периода времени, после чего пытается снова, при условии, что к этому моменту не начала передачу другая станция. состоит из чередующихся периодов конкуренции и передачи, а также периодов простоя (когда все станции молчат).

Протокол CSMA/CD может находиться в одном из трех состояний: 
	передачи, конкуренции и простоя (когда все станции молчат)
**Коллизии не могут происходить после того, как станция захватывает канал, они могут случаться в период конкуренции**
	Захват это когда станция, которая не фиксирует коллизию за время, требуемое для прохождения сигнала по всему кабелю, может быть уверена, что ей удалось завладеть каналом. «Захват» означает, что все остальные станции знают, что она осуществляет передачу, и не мешают ей.




## Протоколы без коллизий

#### Протокол битовой карты 
Основные понятия протокола
	1. Битовая карта Это структура, которая используется для координации передачи данных несколькими станциями (устройствами) в сети. Она состоит из N слотов, где каждая станция имеет свой слот (от 0 до N-1).
	2. Слоты: Каждый период конкуренции делится на N временных слотов. В каждом слоте одна из станций может сообщить о своем намерении передать данные.
	3. Передача: Если у станции есть данные для передачи, она отправляет единичный бит в своем слоте. Например, станция 0 передает бит в слоте 0, станция 1 — в слоте 1 и так далее.
	4. Резервирование: Протокол резервирует время для каждой станции, что позволяет избежать коллизий (ситуаций, когда две или более станции пытаются передать данные одновременно).
Процесс работы протокола
	1. Объявление намерений: В течение одного цикла все станции отправляют сообщения о том, готовы ли они к передаче данных. Это происходит в течение N слотов.
	2. Передача данных: После того как все станции сообщили о своих намерениях, они начинают передачу данных в порядке своих номеров. Поскольку все знают, кто хочет передавать, коллизий не возникает.
	3. Новый цикл: После завершения передачи всех фреймов начинается новый цикл подачи заявок.
Ожидание и производительность
	• Слабая загрузка канала: Когда канал слабо загружен (мало фреймов для передачи), станции с меньшими номерами (например, 0 или 1) могут ждать в среднем 1,5N слотов, поскольку они могут не успеть передать свои данные до конца текущего цикла. Станции с большими номерами (например, 2 или 3) ждут в среднем N/2 слотов. В результате среднее время ожидания для всех станций составляет N слотов.
	• Сильная загрузка канала: Когда все станции хотят передавать данные, накладные расходы на передачу одного фрейма составляют всего один бит.

#### Передача маркера 
(как эстафета у кого палочка тот и бежит)
Смысл протокола битовой карты в том, что он позволяет каждой станции передавать данные по очереди в предопределенном порядке. Другой способ добиться того основан на передаче небольшого сообщения, маркера (token), от одной станции к следующей в той же заранее заданной очередности. Маркер является разрешением на отправку. Когда станция получает маркер, она имеет право отправить фрейм, прежде чем передавать маркер следующей станции. Если фреймов для отправки нет, то она просто передает маркер.

    В протоколе маркерного кольца (token ring) для определения порядка, в 
    котором станции отправляют данные, используется топология сети. Станции 
    подключены одна к другой, образуя простое кольцо. Таким образом, передача 
    маркера заключается в получении его с одной стороны и пересылке в 
    противоположную Фреймы передаются в том же направлении, что и маркер. Они 
    передаются по кольцу, проходя по всем станциям, которые оказываются на их 
    пути. Но чтобы фрейм не циркулировал вечно (как маркер), какая-то станция 
    должна извлечь его из кольца. Это может быть первоначальный отправитель 
    (если фрейм прошел полный цикл), либо станция-получатель.

    для реализации передачи маркера физическое кольцо не требуется. Достаточно 
    иметь логическое кольцо, в котором каждая станция знает, какие станции 
    находятся перед ней и после нее. Канал, соединяющий станции, может 
    представлять собой одну длинную шину. В этом случае каждая станция передает 
    маркер по шине соседям в предопределенном порядке. Получив маркер, станция 
    может использовать шину для отправки одного фрейма. Такой протокол 
    называется маркерной шиной (token bus)

    Он описан в стандарте IEEE 802.4, который оказался настолько неудачным, что 
    был отменен институтом IEEE.

#### Двоичный обратный отсчет
(подобно игре суефа при помощи рандома выигрывает станция)
	Недостатком двух представленных выше протоколов являются накладные расходы в один бит на станцию. Из-за этого они плохо масштабируются на большие сети с сотнями или даже тысячами станций. Можно добиться лучших результатов, используя двоичные адреса станций и канал, способный определенным образом комбинировать передаваемые данные. Станция, желающая занять канал, объявляет свой адрес в виде битовой строки, начиная со старшего бита. Предполагается, что все адреса станций содержат одинаковое количество битов.

    Будучи отправленными одновременно, биты адреса в каждой позиции логически 
    складываются (логическое ИЛИ) средствами канала.

    Во избежание конфликтов следует применить правило арбитража: как только 
    станция с 0 в старшем бите адреса видит, что в суммарном адресе этот 0 
    заменился единицей, она сдается и ждет следующего цикла. Например, если 
    станции 0010, 0100, 1001 и 1010 конкурируют за канал, то в первом битовом 
    интервале они передают биты 0, 0, 1 и 1 соответственно. В этом случае 
    суммарный первый бит адреса будет равен 1. Следовательно, станции с номерами 
    0010 и 0100 считаются проигравшими, а станции 1001 и 1010 продолжают борьбу. 
    Следующий бит у обеих оставшихся станций равен 0 — таким образом, обе 
    продолжают. Третий бит равен 1, поэтому станция 1001 сдается. Победителем 
    оказывается станция 1010, так как ее адрес наибольший. Выиграв торги, она 
    может начать передачу фрейма, после чего начнется новый цикл торгов.




## Протоколы с ограниченной конкуренцией
**В условиях низкой загрузки протоколы с конкуренцией (то есть чистая или дискретная системы ALOHA) предпочтительнее**, потому что время задержки (и число коллизий) в таких системах меньше.
По мере роста загруженности канала эти системы становятся все менее привлекательными, поскольку возрастают накладные расходы, связанные с коллизиями. 
**Для протоколов без коллизий справедливо обратное.** При низкой нагрузке у них относительно высокое время задержки, но по мере роста загруженности эффективность использования канала возрастает (накладные расходы фиксированные).
**Объединить лучшие свойства обеих стратегий и получить протокол, использующий разные стратегии в зависимости от загруженности канала. Такие протоколы мы будем называть протоколами с ограниченной конкуренцией (limited-contention protocols)**


#### Протокол адаптивного прохода по дереву
Одним из простых способов динамического разбиения на группы является алгоритм, разработанный во время Второй мировой войны в армии США для
	проверки солдат на сифилис (Дорфман; Dorfman, 1943). У N солдат брался анализ крови. Часть каждого образца помещалась в одну общую пробирку. Этот смешанный образец проверялся на наличие антител. Если антитела не обнаруживались, все солдаты в данной группе объявлялись здоровыми.
	В противном же случае группа делилась пополам, и каждая половина группы проверялась отдельно. Подобный процесс продолжался до тех пор, пока размер группы не уменьшался до одного солдата.

#### Протоколы беспроводных локальных сетей
протокол **MACA** (Multiple Access with Collision Avoidance — множественный доступ с предотвращением коллизий) - Идея, лежащая в основе этого протокола,  заключается в том, что отправитель заставляет получателя передать короткий фрейм. Соседние станции слышат эту передачу и воздерживаются от действий на время, требуемое для приема большого фрейма данных.
		фрейм RTS (Request To Send — запрос на передачу)
		фрейм CTS (Clear To Send — разрешение передачи)
		![[Pasted image 20241213115903.png]]
        `Несмотря на все меры предосторожности, коллизии все равно могут` 
        `произойти. Например, станции B и C могут одновременно послать RTS` 
        `станции A. Возникнет коллизия, и фреймы не будут приняты. В этом случае` 
        `передатчик`
        `и, не услышав CTS в установленный срок, ждут случайное время и` 
        `повторяют попытку.`



